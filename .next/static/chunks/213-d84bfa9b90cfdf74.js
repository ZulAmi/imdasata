(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[213],{7187:function(e){"use strict";var t,s="object"==typeof Reflect?Reflect:null,r=s&&"function"==typeof s.apply?s.apply:function(e,t,s){return Function.prototype.apply.call(e,t,s)};t=s&&"function"==typeof s.ownKeys?s.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var n=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise(function(s,r){var n;function i(s){e.removeListener(t,o),r(s)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),s([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&(n={once:!0},"function"==typeof e.on&&g(e,"error",i,n))})},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function c(e,t,s,r){if(a(s),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,s.listener?s.listener:s),i=e._events),o=i[t]),void 0===o)o=i[t]=s,++e._eventsCount;else if("function"==typeof o?o=i[t]=r?[s,o]:[o,s]:r?o.unshift(s):o.push(s),(n=l(e))>0&&o.length>n&&!o.warned){o.warned=!0;var n,i,o,c=Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=o.length,console&&console.warn&&console.warn(c)}return e}function d(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,s){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:s},n=d.bind(r);return n.listener=s,r.wrapFn=n,n}function m(e,t,s){var r=e._events;if(void 0===r)return[];var n=r[t];return void 0===n?[]:"function"==typeof n?s?[n.listener||n]:[n]:s?function(e){for(var t=Array(e.length),s=0;s<t.length;++s)t[s]=e[s].listener||e[s];return t}(n):p(n,n.length)}function h(e){var t=this._events;if(void 0!==t){var s=t[e];if("function"==typeof s)return 1;if(void 0!==s)return s.length}return 0}function p(e,t){for(var s=Array(t),r=0;r<t;++r)s[r]=e[r];return s}function g(e,t,s,r){if("function"==typeof e.on)r.once?e.once(t,s):e.on(t,s);else if("function"==typeof e.addEventListener)e.addEventListener(t,function n(i){r.once&&e.removeEventListener(t,n),s(i)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||n(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),i.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||n(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return l(this)},i.prototype.emit=function(e){for(var t=[],s=1;s<arguments.length;s++)t.push(arguments[s]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var o,a=Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)r(l,this,t);else for(var c=l.length,d=p(l,c),s=0;s<c;++s)r(d[s],this,t);return!0},i.prototype.addListener=function(e,t){return c(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return c(this,e,t,!0)},i.prototype.once=function(e,t){return a(t),this.on(e,u(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,u(this,e,t)),this},i.prototype.removeListener=function(e,t){var s,r,n,i,o;if(a(t),void 0===(r=this._events)||void 0===(s=r[e]))return this;if(s===t||s.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,s.listener||t));else if("function"!=typeof s){for(n=-1,i=s.length-1;i>=0;i--)if(s[i]===t||s[i].listener===t){o=s[i].listener,n=i;break}if(n<0)return this;0===n?s.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(s,n),1===s.length&&(r[e]=s[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,s,r;if(void 0===(s=this._events))return this;if(void 0===s.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==s[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete s[e]),this;if(0==arguments.length){var n,i=Object.keys(s);for(r=0;r<i.length;++r)"removeListener"!==(n=i[r])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=s[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},i.prototype.listeners=function(e){return m(this,e,!0)},i.prototype.rawListeners=function(e){return m(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},i.prototype.listenerCount=h,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},3454:function(e,t,s){"use strict";var r,n;e.exports=(null==(r=s.g.process)?void 0:r.env)&&"object"==typeof(null==(n=s.g.process)?void 0:n.env)?s.g.process:s(7663)},5213:function(e,t,s){"use strict";var r=s(5893),n=s(7294),i=s(625),o=s(5658);t.Z=e=>{let t,{userId:s,onAnalysisComplete:a,onInterventionTriggered:l}=e,[c,d]=(0,n.useState)(!1),[u,m]=(0,n.useState)(!1),[h,p]=(0,n.useState)(0),[g,x]=(0,n.useState)(!1),[v,y]=(0,n.useState)(null),[f,b]=(0,n.useState)([]),[N,j]=(0,n.useState)(null),[w,L]=(0,n.useState)([]),[D,E]=(0,n.useState)("en-US"),[C,T]=(0,n.useState)(!0),[k,S]=(0,n.useState)("record"),M=(0,n.useRef)(null),A=(0,n.useRef)([]),I=(0,n.useRef)(null),{trackInteraction:_,trackFeatureUsage:R}=(0,o.VJ)(s);(0,n.useEffect)(()=>(i.V3.on("analysis:completed",U),i.V3.on("intervention:triggered",O),i.V3.on("mood:calculated",z),P(),()=>{i.V3.removeAllListeners(),I.current&&clearInterval(I.current)}),[s]);let P=()=>{j(i.V3.getUserMoodTrends(s)),L(i.V3.getUserInterventions(s))},U=e=>{var t,s;y(e),x(!1),P(),_("voice-analysis","analysis-completed",{moodScore:null===(t=e.moodScore)||void 0===t?void 0:t.overall,riskLevel:null===(s=e.riskAssessment)||void 0===s?void 0:s.riskLevel}),a&&a(e)},O=e=>{let{intervention:t}=e;L(e=>[t,...e]),_("voice-analysis","intervention-triggered",{severity:t.severity,triggerType:t.triggerType}),l&&l(t)},z=e=>{let{moodScore:t}=e;R("voice-analysis",60,"completed")},F=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:44100}}),t=new MediaRecorder(e,{mimeType:"audio/webm;codecs=opus"});M.current=t,A.current=[],t.ondataavailable=e=>{e.data.size>0&&A.current.push(e.data)},t.onstop=()=>{let t=new Blob(A.current,{type:"audio/webm"});V(t),e.getTracks().forEach(e=>e.stop())},t.start(100),d(!0),p(0),I.current=setInterval(()=>{p(e=>e+1)},1e3),_("voice-analysis","recording-started",{language:D,privacyMode:C})}catch(e){console.error("Error starting recording:",e),alert("Could not access microphone. Please check permissions.")}},V=async e=>{x(!0);try{let t=new File([e],"voice-note-".concat(Date.now(),".webm"),{type:"audio/webm"}),r={id:await i.V3.uploadVoiceNote(t,s),userId:s,audioUrl:URL.createObjectURL(e),uploadedAt:new Date,duration:h,language:D,isProcessed:!1,isPrivacyProtected:C};b(e=>[r,...e])}catch(e){console.error("Error processing voice note:",e),x(!1),alert("Error processing voice note. Please try again.")}},H=e=>"".concat(Math.floor(e/60).toString().padStart(2,"0"),":").concat((e%60).toString().padStart(2,"0")),K=e=>e>=70?"text-green-600":e>=50?"text-yellow-600":e>=30?"text-orange-600":"text-red-600",W=e=>{switch(e){case"low":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"high":return"bg-orange-100 text-orange-800";case"critical":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"\uD83C\uDF99️ Voice Sentiment Analysis"}),(0,r.jsx)("p",{className:"text-gray-600",children:"AI-powered emotional insights from your voice notes"})]})}),(0,r.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4",children:(0,r.jsx)("nav",{className:"flex space-x-8",children:[{id:"record",label:"Record",icon:"\uD83C\uDF99️"},{id:"analyze",label:"Analysis",icon:"\uD83D\uDCCA"},{id:"trends",label:"Trends",icon:"\uD83D\uDCC8"},{id:"interventions",label:"Wellness",icon:"\uD83C\uDF1F"}].map(e=>(0,r.jsxs)("button",{onClick:()=>S(e.id),className:"py-4 px-2 border-b-2 font-medium text-sm transition-colors ".concat(k===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,r.jsx)("span",{className:"mr-2",children:e.icon}),e.label]},e.id))})})}),(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:["record"===k&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-md border border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\uD83C\uDF99️ Voice Note Recording"}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Language"}),(0,r.jsx)("select",{value:D,onChange:e=>E(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:c,children:i.V3.getSupportedLanguages().map(e=>(0,r.jsx)("option",{value:e.code,children:e.name},e.code))})]}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:C,onChange:e=>T(e.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",disabled:c}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Enable privacy protection (on-device processing where possible)"})]})}),(0,r.jsx)("div",{className:"text-center mb-6",children:(0,r.jsx)("div",{className:"inline-flex items-center px-4 py-2 rounded-full text-sm font-medium ".concat(c?u?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"w-2 h-2 rounded-full mr-2 ".concat(u?"bg-yellow-500":"bg-red-500 animate-pulse")}),u?"Paused":"Recording"," - ",H(h)]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"w-2 h-2 rounded-full bg-gray-400 mr-2"}),"Ready to record"]})})}),(0,r.jsx)("div",{className:"flex justify-center space-x-4",children:c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("button",{onClick:()=>{M.current&&c&&(u?(M.current.resume(),I.current=setInterval(()=>{p(e=>e+1)},1e3)):(M.current.pause(),I.current&&(clearInterval(I.current),I.current=null)),m(!u))},className:"flex items-center px-6 py-3 rounded-lg transition-colors ".concat(u?"bg-green-600 text-white hover:bg-green-700":"bg-yellow-600 text-white hover:bg-yellow-700"),children:[(0,r.jsx)("span",{className:"text-xl mr-2",children:u?"▶️":"⏸️"}),u?"Resume":"Pause"]}),(0,r.jsxs)("button",{onClick:()=>{M.current&&c&&(M.current.stop(),d(!1),m(!1),I.current&&(clearInterval(I.current),I.current=null),_("voice-analysis","recording-stopped",{duration:h,language:D}))},className:"flex items-center px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[(0,r.jsx)("span",{className:"text-xl mr-2",children:"⏹️"}),"Stop & Analyze"]})]}):(0,r.jsxs)("button",{onClick:F,className:"flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",disabled:g,children:[(0,r.jsx)("span",{className:"text-xl mr-2",children:"\uD83C\uDF99️"}),"Start Recording"]})}),g&&(0,r.jsx)("div",{className:"mt-6 text-center",children:(0,r.jsxs)("div",{className:"inline-flex items-center px-4 py-2 bg-blue-100 text-blue-800 rounded-lg",children:[(0,r.jsx)("div",{className:"animate-spin w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full mr-2"}),"Analyzing voice note..."]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-md border border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\uD83D\uDCCB Recent Voice Notes"}),0===f.length?(0,r.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No voice notes recorded yet"}):(0,r.jsx)("div",{className:"space-y-3",children:f.slice(0,5).map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm font-medium",children:[e.uploadedAt.toLocaleDateString()," at ",e.uploadedAt.toLocaleTimeString()]}),(0,r.jsxs)("p",{className:"text-xs text-gray-600",children:["Duration: ",H(e.duration)," | Language: ",e.language]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[e.isPrivacyProtected&&(0,r.jsx)("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:"\uD83D\uDD12 Protected"}),(0,r.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat(e.isProcessed?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"),children:e.isProcessed?"Analyzed":"Processing"})]})]},e.id))})]})]}),"analyze"===k&&(0,r.jsx)("div",{className:"space-y-6",children:v?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-md border border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\uD83D\uDCCA Mood Analysis"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl font-bold ".concat(K(v.moodScore.overall)),children:v.moodScore.overall}),(0,r.jsx)("div",{className:"text-lg",children:(t=v.moodScore.overall)>=80?"\uD83D\uDE0A":t>=60?"\uD83D\uDE42":t>=40?"\uD83D\uDE10":t>=20?"\uD83D\uDE14":"\uD83D\uDE22"}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Overall Mood"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold ".concat(K(v.moodScore.emotional)),children:v.moodScore.emotional}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Emotional"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold ".concat(K(v.moodScore.stress)),children:v.moodScore.stress}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Stress Level"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold ".concat(K(v.moodScore.energy)),children:v.moodScore.energy}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Energy"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold ".concat(K(v.moodScore.clarity)),children:v.moodScore.clarity}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Clarity"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-md border border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\uD83C\uDFAD Emotion Analysis"}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(v.emotions.emotions).map(e=>{let[t,s]=e;return(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:(0,r.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"".concat(100*s,"%")}})}),(0,r.jsx)("div",{className:"text-sm font-medium capitalize",children:t}),(0,r.jsxs)("div",{className:"text-xs text-gray-600",children:[(100*s).toFixed(1),"%"]})]},t)})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-md border border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\uD83D\uDD0D Key Themes"}),(0,r.jsxs)("div",{className:"space-y-3",children:[v.keywords.concerns.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-orange-800 mb-2",children:"Concerns"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:v.keywords.concerns.map((e,t)=>(0,r.jsx)("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 rounded-full text-xs",children:e},t))})]}),v.keywords.supportNeeds.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-blue-800 mb-2",children:"Support Needs"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:v.keywords.supportNeeds.map((e,t)=>(0,r.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:e},t))})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-md border border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"⚠️ Risk Assessment"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"font-medium",children:"Risk Level"}),(0,r.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(W(v.riskAssessment.riskLevel)),children:v.riskAssessment.riskLevel.toUpperCase()})]}),v.riskAssessment.recommendations.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-800 mb-2",children:"Recommendations"}),(0,r.jsx)("ul",{className:"text-sm text-gray-600 space-y-1",children:v.riskAssessment.recommendations.map((e,t)=>(0,r.jsxs)("li",{className:"flex items-start",children:[(0,r.jsx)("span",{className:"text-blue-500 mr-2",children:"•"}),e]},t))})]})]})]})]})]}):(0,r.jsxs)("div",{className:"bg-white rounded-lg p-8 shadow-md border border-gray-200 text-center",children:[(0,r.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDF99️"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Analysis Available"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Record a voice note to see detailed analysis results."}),(0,r.jsx)("button",{onClick:()=>S("record"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Record Voice Note"})]})}),"trends"===k&&(0,r.jsx)("div",{className:"space-y-6",children:N&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-md border border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\uD83D\uDCC8 Mood Trends"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl font-bold ".concat(K(N.averageMood)),children:N.averageMood}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Average Mood"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold ".concat("improving"===N.moodTrend?"text-green-600":"declining"===N.moodTrend?"text-red-600":"concerning"===N.moodTrend?"text-red-600":"text-gray-600"),children:"improving"===N.moodTrend?"↗️":"declining"===N.moodTrend?"↘️":"concerning"===N.moodTrend?"⚠️":"➡️"}),(0,r.jsx)("div",{className:"text-sm text-gray-600 capitalize",children:N.moodTrend})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold ".concat(N.volatility<10?"text-green-600":N.volatility<20?"text-yellow-600":"text-red-600"),children:N.volatility}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Volatility"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(W(N.riskLevel)),children:N.riskLevel.toUpperCase()}),(0,r.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:"Risk Level"})]})]})]}),N.recommendations.length>0&&(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-md border border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\uD83D\uDCA1 Personalized Recommendations"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:N.recommendations.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-start p-3 bg-blue-50 rounded-lg",children:[(0,r.jsx)("span",{className:"text-blue-500 text-xl mr-3",children:"\uD83D\uDCA1"}),(0,r.jsx)("p",{className:"text-sm text-blue-800",children:e})]},t))})]})]})}),"interventions"===k&&(0,r.jsx)("div",{className:"space-y-6",children:0===w.length?(0,r.jsxs)("div",{className:"bg-white rounded-lg p-8 shadow-md border border-gray-200 text-center",children:[(0,r.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDF1F"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Interventions Needed"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Great! No concerning patterns detected in your voice notes."})]}):(0,r.jsx)("div",{className:"space-y-4",children:w.map(e=>(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-md border-l-4 ".concat("critical"===e.severity?"border-red-500":"high"===e.severity?"border-orange-500":"medium"===e.severity?"border-yellow-500":"border-blue-500"),children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Wellness Check-in"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[e.timestamp.toLocaleDateString()," at ",e.timestamp.toLocaleTimeString()]})]}),(0,r.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat("critical"===e.severity?"bg-red-100 text-red-800":"high"===e.severity?"bg-orange-100 text-orange-800":"medium"===e.severity?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),children:e.severity.toUpperCase()})]}),(0,r.jsx)("p",{className:"text-gray-800 mb-4",children:e.message}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:"Suggested Actions:"}),e.actions.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:e.title}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]}),e.url&&(0,r.jsx)("a",{href:e.url,className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition-colors",children:"Access"})]},t))]})]},e.id))})})]})]})}},625:function(e,t,s){"use strict";s.d(t,{V3:function(){return o}});var r=s(7187),n=s(3454);class i extends r.EventEmitter{initializeLanguageSupport(){[{code:"en-US",name:"English (US)",supported:!0,mentalHealthVocabulary:["depressed","anxious","stressed","overwhelmed","hopeless","suicidal","panic","worried","sad","angry","frustrated","tired","exhausted","happy","grateful","calm","peaceful","confident","motivated"],culturalContext:{expressionPatterns:["I feel like","I am struggling with","I need help"],stigmaTerms:["crazy","mental","insane"],supportTerms:["therapy","counseling","support group","medication"]}},{code:"zh-CN",name:"Chinese (Simplified)",supported:!0,mentalHealthVocabulary:["抑郁","焦虑","压力","绝望","痛苦","困扰","开心","感激","平静","自信","动力"],culturalContext:{expressionPatterns:["我觉得","我很担心","我需要帮助"],stigmaTerms:["疯子","神经病"],supportTerms:["心理治疗","咨询","支持小组"]}},{code:"es-ES",name:"Spanish",supported:!0,mentalHealthVocabulary:["deprimido","ansioso","estresado","abrumado","desesperanzado","feliz","agradecido","tranquilo","confiado","motivado"],culturalContext:{expressionPatterns:["Me siento","Estoy luchando con","Necesito ayuda"],stigmaTerms:["loco","mental"],supportTerms:["terapia","consejer\xeda","grupo de apoyo"]}}].forEach(e=>{this.supportedLanguages.set(e.code,e)})}async setupAzureServices(){try{this.emit("services:initialized",{speech:!0,textAnalytics:!0,language:!0,timestamp:new Date})}catch(e){this.emit("services:error",{error:e,timestamp:new Date})}}async analyzeVoiceNote(e){try{this.emit("analysis:started",{noteId:e.id,userId:e.userId});let t=await this.speechToText(e),s=await this.detectLanguage(t.text),r=await this.analyzeEmotions(t,s),n=await this.extractMentalHealthKeywords(t.text,s),i=this.calculateMoodScore(r,n,t);this.updateUserMoodHistory(e.userId,i);let o=await this.assessRisk(e.userId,i,n);o.interventionNeeded&&await this.triggerIntervention(e.userId,o);let a={noteId:e.id,userId:e.userId,speechResult:t,language:s,emotions:r,keywords:n,moodScore:i,riskAssessment:o,timestamp:new Date,privacyProtected:this.privacyMode};return this.analysisResults.set(e.id,a),this.emit("analysis:completed",a),a}catch(t){throw this.emit("analysis:error",{error:t,noteId:e.id}),t}}async speechToText(e){let t={text:"I've been feeling really overwhelmed lately. Work stress is getting to me and I'm having trouble sleeping. I think I need some help but I'm not sure where to start.",confidence:.92,language:"en-US",duration:e.duration,segments:[{text:"I've been feeling really overwhelmed lately.",startTime:0,endTime:3.2,confidence:.95},{text:"Work stress is getting to me and I'm having trouble sleeping.",startTime:3.5,endTime:7.8,confidence:.88},{text:"I think I need some help but I'm not sure where to start.",startTime:8.1,endTime:12.3,confidence:.94}]};return await new Promise(e=>setTimeout(e,2e3)),this.emit("speech:converted",{noteId:e.id,confidence:t.confidence}),t}async detectLanguage(e){return e.includes("我")||e.includes("很")?"zh-CN":e.includes("siento")||e.includes("ayuda")?"es-ES":"en-US"}async analyzeEmotions(e,t){let s={primaryEmotion:"anxiety",emotions:{joy:.1,sadness:.3,anger:.15,fear:.25,surprise:.05,disgust:.05,neutral:.1,anxiety:.7,stress:.8},arousal:.7,valence:.3,confidence:.85};return this.emit("emotions:analyzed",{emotions:s,language:t}),s}async extractMentalHealthKeywords(e,t){if(!this.supportedLanguages.get(t))throw Error("Language ".concat(t," not supported"));let s={concerns:["overwhelmed","stress","trouble sleeping"],positiveIndicators:[],riskKeywords:[],copingMechanisms:[],supportNeeds:["help"],categories:{depression:.3,anxiety:.7,stress:.8,suicidalIdeation:0,selfHarm:0,substance:0,relationships:.1,work:.6,sleep:.5,eating:0}};return this.emit("keywords:extracted",{keywords:s,language:t}),s}calculateMoodScore(e,t,s){let r=(100*e.emotions.joy+(1-e.emotions.sadness)*100+(1-e.emotions.anxiety)*100)/3,n=(1-e.emotions.stress)*100,i=100*e.arousal,o=100*s.confidence,a=Math.max(0,100-Object.values(t.categories).reduce((e,t)=>e+t,0)/10*100),l={overall:Math.round(.3*r+.25*n+.2*i+.15*o+.1*a),emotional:Math.round(r),stress:Math.round(n),energy:Math.round(i),clarity:Math.round(o),timestamp:new Date,confidence:e.confidence,factors:{tone:Math.round(100*e.valence),pace:Math.round(s.duration>0?s.text.length/s.duration*10:50),volume:Math.round(100*e.arousal),keywords:Math.round(a),sentiment:Math.round(100*e.valence)}};return this.emit("mood:calculated",{moodScore:l}),l}updateUserMoodHistory(e,t){this.userMoodHistory.has(e)||this.userMoodHistory.set(e,[]);let s=this.userMoodHistory.get(e);s.push(t),s.length>100&&s.shift(),this.emit("mood:updated",{userId:e,historyLength:s.length})}async assessRisk(e,t,s){let r=this.userMoodHistory.get(e)||[],n=t.overall<30,i=t.stress<40,o=s.categories.suicidalIdeation>.3||s.categories.selfHarm>.3,a=this.calculateTrendDecline(r),l="low",c=!1;return o||s.categories.suicidalIdeation>.5?(l="critical",c=!0):n&&i&&a?(l="high",c=!0):(n||i)&&(l="medium",c=t.overall<25),{riskLevel:l,interventionNeeded:c,factors:{lowMoodScore:n,highStress:i,riskKeywords:o,trendDecline:a},recommendations:this.generateRecommendations(l,s)}}calculateTrendDecline(e){if(e.length<5)return!1;let t=e.slice(-5),s=e.slice(-10,-5);return 0!==s.length&&t.reduce((e,t)=>e+t.overall,0)/t.length<s.reduce((e,t)=>e+t.overall,0)/s.length-15}generateRecommendations(e,t){let s=[];return"critical"===e?(s.push("Immediate professional help recommended"),s.push("Contact crisis hotline"),s.push("Reach out to trusted friend or family member")):"high"===e?(s.push("Consider speaking with a mental health professional"),s.push("Try stress reduction techniques"),s.push("Ensure adequate sleep and nutrition")):"medium"===e&&(s.push("Practice mindfulness or meditation"),s.push("Engage in physical activity"),s.push("Connect with support network")),t.categories.work>.5&&s.push("Consider work-life balance strategies"),t.categories.sleep>.5&&s.push("Focus on sleep hygiene"),t.categories.anxiety>.5&&s.push("Try anxiety management techniques"),s}async triggerIntervention(e,t){let s={id:"intervention-".concat(Date.now()),userId:e,triggerType:"mood_decline",severity:t.riskLevel,message:this.generateInterventionMessage(t),actions:this.generateInterventionActions(t),timestamp:new Date,responded:!1};this.interventions.has(e)||this.interventions.set(e,[]),this.interventions.get(e).push(s),this.emit("intervention:triggered",{intervention:s}),"critical"===t.riskLevel&&await this.executeCriticalIntervention(s)}generateInterventionMessage(e){let t={critical:"We've noticed some concerning patterns in your recent voice notes. Your wellbeing is important to us. Please consider reaching out for immediate support.",high:"It seems like you might be going through a difficult time. Remember that support is available and you don't have to face this alone.",medium:"We've noticed you might be experiencing some stress. Here are some resources that might help.",low:"Keep taking care of yourself. Here are some wellness tips for you."};return t[e.riskLevel]||t.medium}generateInterventionActions(e){let t=[];return"critical"===e.riskLevel&&t.push({type:"emergency_protocol",title:"Crisis Support",description:"Connect with crisis counselor immediately",url:"tel:988",priority:1,automated:!0}),("high"===e.riskLevel||"critical"===e.riskLevel)&&t.push({type:"professional_contact",title:"Professional Help",description:"Schedule appointment with mental health professional",priority:2,automated:!1}),t.push({type:"resource_suggestion",title:"Coping Resources",description:"Access curated mental health resources",url:"/resources",priority:3,automated:!0}),t.push({type:"peer_connect",title:"Peer Support",description:"Connect with peer support community",url:"/peer-support",priority:4,automated:!0}),t}async executeCriticalIntervention(e){this.emit("intervention:critical",{intervention:e,timestamp:new Date,autoExecuted:!0})}async uploadVoiceNote(e,t){let s={id:"voice-".concat(Date.now(),"-").concat(t),userId:t,audioUrl:URL.createObjectURL(e),uploadedAt:new Date,duration:0,isProcessed:!1,isPrivacyProtected:this.privacyMode};return this.voiceNotes.set(s.id,s),this.analyzeVoiceNote(s).catch(e=>{this.emit("upload:error",{error:e,noteId:s.id})}),s.id}getUserMoodTrends(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"weekly",s=this.userMoodHistory.get(e)||[];if(0===s.length)return{timeframe:t,moodTrend:"stable",averageMood:50,volatility:0,riskLevel:"low",recommendations:["Continue regular check-ins"],interventionNeeded:!1};let r=s.slice(-7),n=r.reduce((e,t)=>e+t.overall,0)/r.length,i=Math.sqrt(r.reduce((e,t)=>e+Math.pow(t.overall-n,2),0)/r.length),o="stable";if(r.length>=3){let e=r.slice(0,Math.floor(r.length/2)),t=r.slice(Math.floor(r.length/2)),s=e.reduce((e,t)=>e+t.overall,0)/e.length,n=t.reduce((e,t)=>e+t.overall,0)/t.length;n>s+10?o="improving":n<s-10?o="declining":n<30&&(o="concerning")}let a="low";return n<25||"concerning"===o?a="critical":n<40||"declining"===o?a="high":(n<60||i>20)&&(a="medium"),{timeframe:t,moodTrend:o,averageMood:Math.round(n),volatility:Math.round(i),riskLevel:a,recommendations:this.generateRecommendations(a,{categories:{}}),interventionNeeded:"critical"===a||"high"===a}}getAnalysisResult(e){return this.analysisResults.get(e)}getUserInterventions(e){return this.interventions.get(e)||[]}getSupportedLanguages(){return Array.from(this.supportedLanguages.values())}enablePrivacyMode(e){this.privacyMode=e,this.emit("privacy:updated",{enabled:e})}deleteUserData(e){this.userMoodHistory.delete(e),this.interventions.delete(e),Array.from(this.voiceNotes.entries()).filter(t=>{let[s,r]=t;return r.userId===e}).forEach(e=>{let[t,s]=e;this.voiceNotes.delete(t),this.analysisResults.delete(t)}),this.emit("data:deleted",{userId:e})}constructor(e,t=!0){super(),this.azureConfig=e,this.privacyMode=t,this.voiceNotes=new Map,this.analysisResults=new Map,this.userMoodHistory=new Map,this.interventions=new Map,this.supportedLanguages=new Map,this.initializeLanguageSupport(),this.setupAzureServices()}}let o=new i({speechKey:n.env.AZURE_SPEECH_KEY||"demo-key",speechRegion:n.env.AZURE_SPEECH_REGION||"eastus",textAnalyticsKey:n.env.AZURE_TEXT_ANALYTICS_KEY||"demo-key",textAnalyticsEndpoint:n.env.AZURE_TEXT_ANALYTICS_ENDPOINT||"https://demo.cognitiveservices.azure.com/",languageKey:n.env.AZURE_LANGUAGE_KEY||"demo-key",languageEndpoint:n.env.AZURE_LANGUAGE_ENDPOINT||"https://demo.cognitiveservices.azure.com/"})},7663:function(e){!function(){var t={229:function(e){var t,s,r,n=e.exports={};function i(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(s){try{return t.call(null,e,0)}catch(s){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{s="function"==typeof clearTimeout?clearTimeout:o}catch(e){s=o}}();var l=[],c=!1,d=-1;function u(){c&&r&&(c=!1,r.length?l=r.concat(l):d=-1,l.length&&m())}function m(){if(!c){var e=a(u);c=!0;for(var t=l.length;t;){for(r=l,l=[];++d<t;)r&&r[d].run();d=-1,t=l.length}r=null,c=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===o||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];l.push(new h(e,t)),1!==l.length||c||a(m)},h.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},s={};function r(e){var n=s[e];if(void 0!==n)return n.exports;var i=s[e]={exports:{}},o=!0;try{t[e](i,i.exports,r),o=!1}finally{o&&delete s[e]}return i.exports}r.ab="//";var n=r(229);e.exports=n}()}}]);