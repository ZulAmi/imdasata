(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[246],{8595:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/gamification-admin",function(){return t(6742)}])},6742:function(e,s,t){"use strict";t.r(s);var a=t(5893),l=t(7294),r=t(9008),i=t.n(r),n=t(3923);let d=e=>{let{users:s,onAward:t,onClose:r}=e,[i,n]=(0,l.useState)(""),[d,c]=(0,l.useState)(""),[x,m]=(0,l.useState)("");return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl p-8 max-w-md mx-4 w-full",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Award Points Manually"}),(0,a.jsx)("button",{onClick:r,className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i&&d&&x&&t(i,parseInt(d),x)},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select User"}),(0,a.jsxs)("select",{value:i,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Choose a user..."}),s.map(e=>(0,a.jsxs)("option",{value:e.userId,children:[e.username," (Level ",e.currentLevel,")"]},e.userId))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Points to Award"}),(0,a.jsx)("input",{type:"number",value:d,onChange:e=>c(e.target.value),min:"1",max:"1000",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,a.jsx)("input",{type:"text",value:x,onChange:e=>m(e.target.value),placeholder:"e.g., Special bonus for excellent participation",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Award Points"})]})]})]})})};s.default=()=>{let[e,s]=(0,l.useState)("overview"),[t,r]=(0,l.useState)([]),[c,x]=(0,l.useState)([]),[m,o]=(0,l.useState)([]),[h,j]=(0,l.useState)(null),[u,p]=(0,l.useState)(null),[b,g]=(0,l.useState)(!1),[N,y]=(0,l.useState)(!1),[v,f]=(0,l.useState)(!1);(0,l.useEffect)(()=>{w()},[]);let w=()=>{r(n.b.getAllUsers()),j(n.b.getSystemStats());let e=[];n.b.getAllUsers().forEach(s=>{let t=n.b.getTransactions(s.userId);e.push(...t)}),x(e.sort((e,s)=>s.timestamp.getTime()-e.timestamp.getTime()))},S=()=>h?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-md border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"Total Users"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:h.totalUsers})]}),(0,a.jsx)("div",{className:"text-blue-500 text-3xl",children:"\uD83D\uDC65"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-md border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"Active Users (7d)"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:h.activeUsers})]}),(0,a.jsx)("div",{className:"text-green-500 text-3xl",children:"\uD83D\uDD25"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-md border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"Points Awarded"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:h.totalPointsAwarded.toLocaleString()})]}),(0,a.jsx)("div",{className:"text-purple-500 text-3xl",children:"\uD83D\uDC8E"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-md border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"Rewards Redeemed"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:h.rewardsRedeemed})]}),(0,a.jsx)("div",{className:"text-orange-500 text-3xl",children:"\uD83C\uDF81"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-md border border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"User Engagement"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{children:"Average Level"}),(0,a.jsx)("span",{className:"font-semibold",children:h.averageLevel.toFixed(1)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{children:"Total Achievements"}),(0,a.jsx)("span",{className:"font-semibold",children:h.totalAchievements})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{children:"Points Spent"}),(0,a.jsx)("span",{className:"font-semibold",children:h.totalPointsSpent.toLocaleString()})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-md border border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Recent Activity"}),(0,a.jsx)("div",{className:"space-y-3",children:c.slice(0,5).map(e=>{var s;return(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium",children:e.description}),(0,a.jsxs)("p",{className:"text-gray-500",children:["User: ",(null===(s=t.find(s=>s.userId===e.userId))||void 0===s?void 0:s.username)||"Unknown"]})]}),(0,a.jsxs)("div",{className:"font-semibold ".concat("earn"===e.type?"text-green-600":"text-red-600"),children:["earn"===e.type?"+":"-",Math.abs(e.amount)]})]},e.id)})})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-md border border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Top Users"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,a.jsx)("th",{className:"text-left py-2",children:"Rank"}),(0,a.jsx)("th",{className:"text-left py-2",children:"User"}),(0,a.jsx)("th",{className:"text-left py-2",children:"Level"}),(0,a.jsx)("th",{className:"text-left py-2",children:"Points"}),(0,a.jsx)("th",{className:"text-left py-2",children:"Streak"}),(0,a.jsx)("th",{className:"text-left py-2",children:"Last Active"})]})}),(0,a.jsx)("tbody",{children:t.sort((e,s)=>s.totalPoints-e.totalPoints).slice(0,10).map((e,s)=>(0,a.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,a.jsx)("td",{className:"py-2",children:s+1}),(0,a.jsx)("td",{className:"py-2 font-medium",children:e.username}),(0,a.jsxs)("td",{className:"py-2",children:["Level ",e.currentLevel]}),(0,a.jsx)("td",{className:"py-2",children:e.totalPoints.toLocaleString()}),(0,a.jsxs)("td",{className:"py-2",children:[e.currentStreak," days"]}),(0,a.jsx)("td",{className:"py-2 text-sm text-gray-600",children:e.lastActive.toLocaleDateString()})]},e.userId))})]})})]})]}):null;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i(),{children:[(0,a.jsx)("title",{children:"Gamification Admin - SATA Mental Health Platform"}),(0,a.jsx)("meta",{name:"description",content:"Administrative dashboard for the SATA gamification system"})]}),(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"\uD83C\uDFAE Gamification Admin"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage the SATA gamification system"})]}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"font-semibold",children:[(null==h?void 0:h.totalUsers)||0," Total Users"]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[(null==h?void 0:h.activeUsers)||0," Active (7d)"]})]})})]})})}),(0,a.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:(0,a.jsx)("nav",{className:"flex space-x-8",children:[{id:"overview",label:"Overview",icon:"\uD83D\uDCCA"},{id:"users",label:"Users",icon:"\uD83D\uDC65"},{id:"transactions",label:"Transactions",icon:"\uD83D\uDCB3"},{id:"analytics",label:"Analytics",icon:"\uD83D\uDCC8"}].map(t=>(0,a.jsxs)("button",{onClick:()=>s(t.id),className:"py-4 px-2 border-b-2 font-medium text-sm transition-colors ".concat(e===t.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,a.jsx)("span",{className:"mr-2",children:t.icon}),t.label]},t.id))})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:["overview"===e&&S(),"users"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"User Management"}),(0,a.jsx)("button",{onClick:()=>f(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Award Points Manually"})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left py-3 px-4",children:"User"}),(0,a.jsx)("th",{className:"text-left py-3 px-4",children:"Level"}),(0,a.jsx)("th",{className:"text-left py-3 px-4",children:"Total Points"}),(0,a.jsx)("th",{className:"text-left py-3 px-4",children:"Available Points"}),(0,a.jsx)("th",{className:"text-left py-3 px-4",children:"Achievements"}),(0,a.jsx)("th",{className:"text-left py-3 px-4",children:"Current Streak"}),(0,a.jsx)("th",{className:"text-left py-3 px-4",children:"Last Active"}),(0,a.jsx)("th",{className:"text-left py-3 px-4",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:t.map(e=>(0,a.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.username}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:e.userId})]})}),(0,a.jsxs)("td",{className:"py-3 px-4",children:["Level ",e.currentLevel]}),(0,a.jsx)("td",{className:"py-3 px-4",children:e.totalPoints.toLocaleString()}),(0,a.jsx)("td",{className:"py-3 px-4",children:e.availablePoints.toLocaleString()}),(0,a.jsx)("td",{className:"py-3 px-4",children:e.achievements.length}),(0,a.jsxs)("td",{className:"py-3 px-4",children:[e.currentStreak," days"]}),(0,a.jsx)("td",{className:"py-3 px-4 text-sm",children:e.lastActive.toLocaleDateString()}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("button",{onClick:()=>{p(e),g(!0)},className:"text-blue-600 hover:text-blue-800 text-sm",children:"View Details"})})]},e.userId))})]})})})]}),"transactions"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Transaction History"}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left py-3 px-4",children:"Date"}),(0,a.jsx)("th",{className:"text-left py-3 px-4",children:"User"}),(0,a.jsx)("th",{className:"text-left py-3 px-4",children:"Type"}),(0,a.jsx)("th",{className:"text-left py-3 px-4",children:"Category"}),(0,a.jsx)("th",{className:"text-left py-3 px-4",children:"Amount"}),(0,a.jsx)("th",{className:"text-left py-3 px-4",children:"Description"}),(0,a.jsx)("th",{className:"text-left py-3 px-4",children:"Source"})]})}),(0,a.jsx)("tbody",{children:c.slice(0,50).map(e=>{var s;return(0,a.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,a.jsxs)("td",{className:"py-3 px-4 text-sm",children:[e.timestamp.toLocaleDateString()," ",e.timestamp.toLocaleTimeString()]}),(0,a.jsx)("td",{className:"py-3 px-4",children:(null===(s=t.find(s=>s.userId===e.userId))||void 0===s?void 0:s.username)||"Unknown"}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("earn"===e.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.type})}),(0,a.jsx)("td",{className:"py-3 px-4 capitalize",children:e.category.replace("-"," ")}),(0,a.jsxs)("td",{className:"py-3 px-4 font-semibold ".concat("earn"===e.type?"text-green-600":"text-red-600"),children:["earn"===e.type?"+":"-",Math.abs(e.amount)]}),(0,a.jsx)("td",{className:"py-3 px-4",children:e.description}),(0,a.jsx)("td",{className:"py-3 px-4 text-sm text-gray-600",children:e.source})]},e.id)})})]})})})]}),"analytics"===e&&S()," "]}),b&&u&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl p-8 max-w-2xl mx-4 w-full max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"User Details"}),(0,a.jsx)("button",{onClick:()=>g(!1),className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Username"}),(0,a.jsx)("p",{className:"font-medium",children:u.username})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"User ID"}),(0,a.jsx)("p",{className:"font-medium font-mono text-sm",children:u.userId})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Current Level"}),(0,a.jsxs)("p",{className:"font-medium",children:["Level ",u.currentLevel]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Total Points"}),(0,a.jsx)("p",{className:"font-medium",children:u.totalPoints.toLocaleString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Available Points"}),(0,a.jsx)("p",{className:"font-medium",children:u.availablePoints.toLocaleString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Current Streak"}),(0,a.jsxs)("p",{className:"font-medium",children:[u.currentStreak," days"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"text-sm text-gray-600",children:["Achievements (",u.achievements.length,")"]}),(0,a.jsx)("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-2",children:u.achievements.map(e=>(0,a.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-lg",children:e.icon}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:e.description})]})]})},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Recent Transactions"}),(0,a.jsx)("div",{className:"mt-2 space-y-2",children:n.b.getTransactions(u.userId).slice(0,10).map(e=>(0,a.jsxs)("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:e.description}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:e.timestamp.toLocaleDateString()})]}),(0,a.jsxs)("div",{className:"font-semibold text-sm ".concat("earn"===e.type?"text-green-600":"text-red-600"),children:["earn"===e.type?"+":"-",Math.abs(e.amount)]})]},e.id))})]})]})]})}),v&&(0,a.jsx)(d,{users:t,onAward:(e,s,t)=>{n.b.awardPoints(e,"achievement",s,t,"admin-manual"),w(),f(!1)},onClose:()=>f(!1)})]})]})}},9008:function(e,s,t){e.exports=t(3867)}},function(e){e.O(0,[631,923,888,774,179],function(){return e(e.s=8595)}),_N_E=e.O()}]);