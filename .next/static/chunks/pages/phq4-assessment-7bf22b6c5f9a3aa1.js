(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[872],{3423:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/phq4-assessment",function(){return s(549)}])},549:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSG:function(){return d},default:function(){return c}});var n=s(5893),a=s(1798),r=s(1664),i=s.n(r),o=s(7294),l=s(8773),d=!0;function c(){let{t:e,i18n:t}=(0,a.$G)("common"),[s,r]=(0,o.useState)(0),[d,c]=(0,o.useState)([]),[u,m]=(0,o.useState)(!1),[h,p]=(0,o.useState)(!1),[x,g]=(0,o.useState)(null),[b,y]=(0,o.useState)(""),[f,v]=(0,o.useState)(!1),[N,w]=(0,o.useState)(!1),j=(0,o.useRef)(null),k=[{id:"q1",en:{text:"Little interest or pleasure in doing things",description:"Over the last 2 weeks, how often have you been bothered by little interest or pleasure in doing things?"},zh:{text:"对事物缺乏兴趣或愉悦感",description:'在过去2周里，您有多频繁地被"对事物缺乏兴趣或愉悦感"所困扰？'},bn:{text:"কাজকর্মে আগ্রহ বা আনন্দের অভাব",description:"গত ২ সপ্তাহে, কাজকর্মে আগ্রহ বা আনন্দের অভাব নিয়ে আপনি কতবার বিরক্ত হয়েছেন?"},ta:{text:"விஷயங்களில் ஆர்வம் அல்லது மகிழ்ச்சி குறைவு",description:"கடந்த 2 வாரங்களில், விஷயங்களில் ஆர்வம் அல்லது மகிழ்ச்சி குறைவால் எத்தனை முறை நீங்கள் தொந்தரவு அடைந்தீர்கள்?"},my:{text:"အရာရာတွေကို စိတ်မ၀င်စားဖြစ်ခြင်း",description:"လွန်ခဲ့သော ၂ ပတ်အတွင်း အရာရာတွေကို စိတ်မ၀င်စားဖြစ်ခြင်းကြောင့် ဘယ်လောက်မကြာခဏ စိတ်ညစ်ခဲ့ရပါသလဲ?"},idn:{text:"Kurang minat atau kesenangan dalam melakukan hal-hal",description:"Dalam 2 minggu terakhir, seberapa sering Anda terganggu oleh kurangnya minat atau kesenangan dalam melakukan hal-hal?"}},{id:"q2",en:{text:"Feeling down, depressed, or hopeless",description:"Over the last 2 weeks, how often have you been bothered by feeling down, depressed, or hopeless?"},zh:{text:"感到沮丧、抑郁或绝望",description:'在过去2周里，您有多频繁地被"感到沮丧、抑郁或绝望"所困扰？'},bn:{text:"মন খারাপ, বিষণ্ণ বা আশাহীন বোধ করা",description:"গত ২ সপ্তাহে, মন খারাপ, বিষণ্ণ বা আশাহীন বোধ করার কারণে আপনি কতবার বিরক্ত হয়েছেন?"},ta:{text:"மனம் வருந்துதல், மனச்சோர்வு அல்லது நம்பிக்கையின்மை",description:"கடந்த 2 வாரங்களில், மனம் வருந்துதல், மனச்சோர்வு அல்லது நம்பிக்கையின்மையால் எத்தனை முறை நீங்கள் தொந்தரவு அடைந்தீர்கள்?"},my:{text:"စိတ်ညစ်ခြင်း၊ စိတ်ဓာတ်ကျခြင်း သို့မဟုတ် မျှော်လင့်ချက်မရှိခြင်း",description:"လွန်ခဲ့သော ၂ ပတ်အတွင်း စိတ်ညစ်ခြင်း၊ စိတ်ဓာတ်ကျခြင်း သို့မဟုတ် မျှော်လင့်ချက်မရှိခြင်းကြောင့် ဘယ်လောက်မကြာခဏ စိတ်ညစ်ခဲ့ရပါသလဲ?"},idn:{text:"Merasa sedih, tertekan, atau putus asa",description:"Dalam 2 minggu terakhir, seberapa sering Anda terganggu oleh perasaan sedih, tertekan, atau putus asa?"}},{id:"q3",en:{text:"Feeling nervous, anxious, or on edge",description:"Over the last 2 weeks, how often have you been bothered by feeling nervous, anxious, or on edge?"},zh:{text:"感到紧张、焦虑或烦躁",description:'在过去2周里，您有多频繁地被"感到紧张、焦虑或烦躁"所困扰？'},bn:{text:"নার্ভাস, উদ্বিগ্ন বা অস্থির বোধ করা",description:"গত ২ সপ্তাহে, নার্ভাস, উদ্বিগ্ন বা অস্থির বোধ করার কারণে আপনি কতবার বিরক্ত হয়েছেন?"},ta:{text:"பதட்டம், கவலை அல்லது அமைதியின்மை",description:"கடந்த 2 வாரங்களில், பதட்டம், கவலை அல்லது அமைதியின்மையால் எத்தனை முறை நீங்கள் தொந்தரவு அடைந்தீர்கள்?"},my:{text:"စိတ်လှုပ်ရှားခြင်း၊ စိုးရိမ်ခြင်း သို့မဟုတ် စိတ်မအေးခြင်း",description:"လွန်ခဲ့သော ၂ ပတ်အတွင်း စိတ်လှုပ်ရှားခြင်း၊ စိုးရိမ်ခြင်း သို့မဟုတ် စိတ်မအေးခြင်းကြောင့် ဘယ်လောက်မကြာခဏ စိတ်ညစ်ခဲ့ရပါသလဲ?"},idn:{text:"Merasa gugup, cemas, atau gelisah",description:"Dalam 2 minggu terakhir, seberapa sering Anda terganggu oleh perasaan gugup, cemas, atau gelisah?"}},{id:"q4",en:{text:"Not being able to stop or control worrying",description:"Over the last 2 weeks, how often have you been bothered by not being able to stop or control worrying?"},zh:{text:"无法停止或控制担忧",description:'在过去2周里，您有多频繁地被"无法停止或控制担忧"所困扰？'},bn:{text:"চিন্তা বন্ধ করতে বা নিয়ন্ত্রণ করতে না পারা",description:"গত ২ সপ্তাহে, চিন্তা বন্ধ করতে বা নিয়ন্ত্রণ করতে না পারার কারণে আপনি কতবার বিরক্ত হয়েছেন?"},ta:{text:"கவலையை நிறுத்த அல்லது கட்டுப்படுத்த முடியாமை",description:"கடந்த 2 வாரங்களில், கவலையை நிறுத்த அல்லது கட்டுப்படுத்த முடியாததால் எத்தனை முறை நீங்கள் தொந்தரவு அடைந்தீர்கள்?"},my:{text:"စိုးရိမ်မှုကို ရပ်တန့်ခြင်း သို့မဟုတ် ထိန်းချုပ်ခြင်း မတတ်နိုင်ခြင်း",description:"လွန်ခဲ့သော ၂ ပတ်အတွင်း စိုးရိမ်မှုကို ရပ်တန့်ခြင်း သို့မဟုတ် ထိန်းချုပ်ခြင်း မတတ်နိုင်ခြင်းကြောင့် ဘယ်လောက်မကြာခဏ စိတ်ညစ်ခဲ့ရပါသလဲ?"},idn:{text:"Tidak dapat menghentikan atau mengontrol kekhawatiran",description:"Dalam 2 minggu terakhir, seberapa sering Anda terganggu oleh tidak dapat menghentikan atau mengontrol kekhawatiran?"}}];(0,o.useEffect)(()=>{b||y((0,l.Z)());{let e=window.SpeechRecognition||window.webkitSpeechRecognition;e&&(w(!0),j.current=new e,j.current.continuous=!1,j.current.interimResults=!1,j.current.lang="zh"===t.language?"zh-CN":"bn"===t.language?"bn-BD":"ta"===t.language?"ta-IN":"my"===t.language?"my-MM":"idn"===t.language?"id-ID":"en-US")}},[b,t.language]);let S=()=>t.language||"en",D=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=S();return e[n]&&e[n][t]?e[n][t]:e.en&&e.en[t]?e.en[t]:s},C=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e[S()]||e.en||t},I=e=>{let t,s;let[n,a,r,i]=e,o=n+a+r+i,l=n+a,d=r+i;o>=12?(t="severe",s="Severe"):o>=9?(t="severe",s="Moderately Severe"):o>=6?(t="moderate",s="Moderate"):o>=3?(t="mild",s="Mild"):(t="minimal",s="Minimal");let c=A(o,l,d,t);return{q1:n,q2:a,q3:r,q4:i,totalScore:o,depressionScore:l,anxietyScore:d,severityLevel:s,riskLevel:t,recommendations:c,timestamp:new Date().toISOString(),anonymousId:b,language:S()}},A=(e,t,s,n)=>{let a=S(),r={en:{minimal:["Continue maintaining your current self-care practices","Consider regular exercise and healthy lifestyle habits","Stay connected with supportive friends and family"],mild:["Consider stress management techniques like meditation or deep breathing","Maintain regular sleep schedule and healthy diet","Connect with peer support groups for additional support"],moderate:["Consider speaking with a mental health professional","Explore counseling or therapy options","Practice daily stress reduction activities"],severe:["Seek professional mental health support immediately","Contact crisis support services if needed","Consider medical evaluation for treatment options"]},zh:{minimal:["继续保持当前的自我护理习惯","考虑定期锻炼和健康的生活方式","与支持你的朋友和家人保持联系"],mild:["考虑压力管理技巧，如冥想或深呼吸","保持规律的睡眠时间和健康饮食","联系同伴支持小组获得额外支持"],moderate:["考虑与心理健康专业人士交谈","探索咨询或治疗选择","练习日常减压活动"],severe:["立即寻求专业心理健康支持","如需要请联系危机支持服务","考虑医疗评估和治疗选择"]}},i=r[a]||r.en;return i[n]||i.minimal},q=e=>{let t=[...d];t[s]=e,c(t),s<k.length-1?r(s+1):z(t)},z=async e=>{p(!0);try{let t=I(e);if((await fetch("/api/assessment/phq4",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({anonymousId:t.anonymousId,q1:t.q1,q2:t.q2,q3:t.q3,q4:t.q4,language:t.language})})).ok)g(t),m(!0);else throw Error("Failed to submit assessment")}catch(t){console.error("Error submitting assessment:",t),g(I(e)),m(!0)}p(!1)};if(h)return(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-8 text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Processing your assessment..."})]})});if(u&&x)return(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,n.jsx)("div",{className:"max-w-2xl mx-auto px-4",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-6 text-center",children:"PHQ-4 Assessment Results"}),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded p-4",children:[(0,n.jsxs)("h3",{className:"font-semibold text-blue-800 mb-2",children:["Overall Score: ",x.totalScore,"/12"]}),(0,n.jsxs)("p",{className:"text-blue-700 text-sm",children:["Severity Level: ",(0,n.jsx)("span",{className:"font-medium",children:x.severityLevel})]}),(0,n.jsxs)("p",{className:"text-blue-700 text-sm",children:["Risk Level: ",(0,n.jsx)("span",{className:"font-medium capitalize",children:x.riskLevel})]})]}),(0,n.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded p-4",children:[(0,n.jsx)("h4",{className:"font-semibold text-purple-800 mb-1",children:"Depression Score"}),(0,n.jsxs)("p",{className:"text-purple-700",children:[x.depressionScore,"/6"]}),(0,n.jsx)("p",{className:"text-purple-600 text-xs mt-1",children:"Questions 1-2"})]}),(0,n.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded p-4",children:[(0,n.jsx)("h4",{className:"font-semibold text-green-800 mb-1",children:"Anxiety Score"}),(0,n.jsxs)("p",{className:"text-green-700",children:[x.anxietyScore,"/6"]}),(0,n.jsx)("p",{className:"text-green-600 text-xs mt-1",children:"Questions 3-4"})]})]}),(0,n.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-4",children:[(0,n.jsx)("h4",{className:"font-semibold text-yellow-800 mb-2",children:"Recommendations"}),(0,n.jsx)("ul",{className:"text-yellow-700 text-sm space-y-1",children:x.recommendations.map((e,t)=>(0,n.jsxs)("li",{children:["• ",e]},t))})]}),"severe"===x.riskLevel&&(0,n.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded p-4",children:[(0,n.jsx)("h4",{className:"font-semibold text-red-800 mb-2",children:"\uD83D\uDEA8 Important Notice"}),(0,n.jsx)("p",{className:"text-red-700 text-sm mb-2",children:"Your scores indicate you may benefit from professional mental health support. Please consider reaching out to a healthcare provider."}),(0,n.jsx)(i(),{href:"/crisis",className:"inline-block",children:(0,n.jsx)("button",{className:"bg-red-600 text-white px-4 py-2 rounded text-sm hover:bg-red-700 transition-colors",children:"Access Crisis Support"})})]}),(0,n.jsxs)("div",{className:"flex space-x-4",children:[(0,n.jsx)("button",{onClick:()=>{r(0),c([]),m(!1),g(null),y((0,l.Z)())},className:"flex-1 bg-gray-600 text-white py-2 px-4 rounded hover:bg-gray-700 transition-colors",children:"Take Again"}),(0,n.jsx)(i(),{href:"/dashboard",className:"flex-1",children:(0,n.jsx)("button",{className:"w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition-colors",children:"Back to Dashboard"})})]})]}),(0,n.jsx)("div",{className:"mt-6 text-center text-xs text-gray-500",children:(0,n.jsxs)("p",{children:["Assessment ID: ",x.anonymousId.substring(0,8),"... | ",new Date(x.timestamp).toLocaleString()]})})]})})});let _=k[s];return S(),(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,n.jsx)("div",{className:"max-w-2xl mx-auto px-4",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:[(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"PHQ-4 Assessment"}),(0,n.jsx)(i(),{href:"/dashboard",className:"text-blue-600 hover:text-blue-800 text-sm",children:"Back to Dashboard"})]}),(0,n.jsx)("p",{className:"text-gray-600 text-sm",children:"This standardized assessment evaluates depression and anxiety symptoms over the past 2 weeks."}),(0,n.jsx)("div",{className:"mt-4 bg-gray-200 rounded-full h-2",children:(0,n.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat((s+1)/k.length*100,"%")}})}),(0,n.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Question ",s+1," of ",k.length]})]}),(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:D(_,"text")}),(0,n.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:D(_,"description")}),N&&(0,n.jsxs)("div",{className:"mb-4 text-center",children:[(0,n.jsx)("button",{onClick:()=>{j.current&&!f&&(v(!0),j.current.start(),j.current.onresult=e=>{let t=e.results[0][0].transcript.toLowerCase(),s={en:{0:["not at all","never","zero"],1:["several days","sometimes","one"],2:["more than half","often","two"],3:["nearly every day","always","three"]},zh:{0:["完全没有","从不"],1:["几天","有时"],2:["超过一半","经常"],3:["几乎每天","总是"]},bn:{0:["একদমই না","না"],1:["কয়েক দিন","কখনো কখনো"],2:["অর্ধেকের বেশি","প্রায়ই"],3:["প্রায় প্রতিদিন","সবসময়"]},ta:{0:["சற்றும் இல்லை","இல்லை"],1:["சில நாட்கள்","சில சமயம்"],2:["பாதி நাட்களுக்கு மேல்","அடிக்கடி"],3:["கிட்டத்தட்ட தினமும்","எப்போதும்"]},my:{0:["လုံးဝမရှိ","မရှိ"],1:["ရက်သတ္တပတ်အချို့","တစ်ခါတလေ"],2:["ရက်ထက်ဝက်ကျော်","မကြာခဏ"],3:["နေ့စဉ်နီးပါး","အမြဲ"]},idn:{0:["tidak sama sekali","tidak"],1:["beberapa hari","kadang"],2:["lebih dari setengah","sering"],3:["hampir setiap hari","selalu"]}};for(let[e,n]of Object.entries(s[S()]||s.en))if(n.some(e=>t.includes(e))){q(parseInt(e));break}v(!1)},j.current.onerror=()=>{v(!1)},j.current.onend=()=>{v(!1)})},disabled:f,className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat(f?"bg-red-100 text-red-800 cursor-not-allowed":"bg-blue-100 text-blue-800 hover:bg-blue-200"),children:f?"\uD83C\uDFA4 Listening...":"\uD83C\uDFA4 Voice Input"}),(0,n.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:'Say your answer out loud (e.g., "not at all", "several days")'})]}),(0,n.jsx)("div",{className:"space-y-3",children:[{value:0,en:"Not at all",zh:"完全没有",bn:"একদমই না",ta:"சற்றும் இல்லை",my:"လုံးဝမရှိ",idn:"Tidak sama sekali",color:"bg-green-100 border-green-300 text-green-800"},{value:1,en:"Several days",zh:"几天",bn:"কয়েক দিন",ta:"சில நாட்கள்",my:"ရက်သတ္တပတ်အချို့",idn:"Beberapa hari",color:"bg-yellow-100 border-yellow-300 text-yellow-800"},{value:2,en:"More than half the days",zh:"超过一半的天数",bn:"অর্ধেকের বেশি দিন",ta:"பாதி நாட்களுக்கு மேல்",my:"ရက်ထက်ဝက်ကျော်",idn:"Lebih dari setengah hari",color:"bg-orange-100 border-orange-300 text-orange-800"},{value:3,en:"Nearly every day",zh:"几乎每天",bn:"প্রায় প্রতিদিন",ta:"கிட்டத்தட்ட தினமும்",my:"နေ့စဉ်နီးပါး",idn:"Hampir setiap hari",color:"bg-red-100 border-red-300 text-red-800"}].map(e=>(0,n.jsx)("button",{onClick:()=>q(e.value),className:"w-full p-4 border-2 rounded-lg text-left hover:shadow-md transition-all ".concat(e.color," hover:opacity-80"),children:(0,n.jsxs)("span",{className:"font-medium",children:[e.value,". ",C(e)]})},e.value))})]}),(0,n.jsxs)("div",{className:"text-center text-xs text-gray-500",children:[(0,n.jsxs)("p",{children:["Your responses are anonymously stored with ID: ",b.substring(0,8),"..."]}),(0,n.jsx)("p",{className:"mt-1",children:"All data is encrypted and PDPA compliant."})]})]})})})}},8773:function(e,t,s){"use strict";let n;s.d(t,{Z:function(){return o}});var a={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let r=new Uint8Array(16),i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));var o=function(e,t,s){if(a.randomUUID&&!t&&!e)return a.randomUUID();let o=(e=e||{}).random??e.rng?.()??function(){if(!n){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");n=crypto.getRandomValues.bind(crypto)}return n(r)}();if(o.length<16)throw Error("Random bytes length must be >= 16");if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){if((s=s||0)<0||s+16>t.length)throw RangeError(`UUID byte range ${s}:${s+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[s+e]=o[e];return t}return function(e,t=0){return(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase()}(o)}}},function(e){e.O(0,[664,888,774,179],function(){return e(e.s=3423)}),_N_E=e.O()}]);