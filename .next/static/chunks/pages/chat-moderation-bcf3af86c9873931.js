(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[492],{9104:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat-moderation",function(){return a(1838)}])},1838:function(e,s,a){"use strict";a.r(s),a.d(s,{__N_SSG:function(){return i}});var t=a(5893),l=a(7294),d=a(1798);let r=e=>{let s,{message:a,onAction:d,isUrgent:r}=e,[n,i]=(0,l.useState)(""),[c,o]=(0,l.useState)("");return(0,t.jsx)("div",{className:"p-6 ".concat(r?"bg-red-50":"bg-yellow-50"),children:(0,t.jsx)("div",{className:"flex items-start justify-between",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("span",{className:"text-sm px-2 py-1 rounded-full ".concat(r?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:r?"FLAGGED":"REVIEW"}),(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:["From: User",a.senderId.slice(-4)]}),(0,t.jsx)("span",{className:"text-sm text-gray-500",children:(s=a.timestamp,new Intl.DateTimeFormat("en",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(s))})]}),(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200 mb-4",children:[(0,t.jsx)("div",{className:"font-medium mb-2",children:"Message Content:"}),(0,t.jsx)("div",{className:"text-gray-700",children:a.content}),a.moderationFlag&&(0,t.jsxs)("div",{className:"mt-3 text-sm",children:[(0,t.jsx)("span",{className:"font-medium text-red-600",children:"Flagged for: "}),(0,t.jsx)("span",{className:"capitalize",children:a.moderationFlag.reason})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("select",{value:n,onChange:e=>i(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"",children:"Choose action..."}),(0,t.jsx)("option",{value:"approve",children:"Approve Message"}),(0,t.jsx)("option",{value:"hide",children:"Hide Message"}),(0,t.jsx)("option",{value:"remove",children:"Remove Message"}),(0,t.jsx)("option",{value:"warn_user",children:"Warn User"})]}),n&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("input",{type:"text",value:c,onChange:e=>o(e.target.value),placeholder:"Reason (optional)",className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,t.jsx)("button",{onClick:()=>{n&&(d(a.id,n,c),i(""),o(""))},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Apply"})]})]})]})})})},n=()=>(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"text-3xl mr-4",children:"\uD83D\uDCAC"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:1247}),(0,t.jsx)("div",{className:"text-gray-600",children:"Total Messages"})]})]})}),(0,t.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"text-3xl mr-4",children:"\uD83D\uDEA8"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-red-600",children:12}),(0,t.jsx)("div",{className:"text-gray-600",children:"Flagged Messages"})]})]})}),(0,t.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"text-3xl mr-4",children:"✅"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["99.0","%"]}),(0,t.jsx)("div",{className:"text-gray-600",children:"Approval Rate"})]})]})}),(0,t.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"text-3xl mr-4",children:"⏱️"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:"15 minutes"}),(0,t.jsx)("div",{className:"text-gray-600",children:"Avg Response"})]})]})})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Top Flagging Reasons"}),(0,t.jsx)("div",{className:"space-y-3",children:[{reason:"Inappropriate language",count:5},{reason:"Spam",count:3},{reason:"Off-topic",count:2},{reason:"Harassment",count:2}].map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"font-medium",children:e.reason}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-red-600 h-2 rounded-full",style:{width:"".concat(e.count/12*100,"%")}})}),(0,t.jsx)("span",{className:"text-sm text-gray-600 w-8",children:e.count})]})]},s))})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Moderation Actions (Last 30 Days)"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:1235}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Approved"})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-red-600",children:8}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Removed"})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:3}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Users Warned"})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:1}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Suspended"})]})]})]})]});var i=!0;s.default=e=>{let{chatSystem:s}=e,{t:a}=(0,d.$G)("common"),[i,c]=(0,l.useState)([]),[o,x]=(0,l.useState)([]),[m,h]=(0,l.useState)([]),[g,u]=(0,l.useState)([]),[p,j]=(0,l.useState)("messages");(0,l.useEffect)(()=>{v()},[]);let v=async()=>{let e=await N();c(e.filter(e=>e.moderationFlag)),x(e.filter(e=>!e.moderationFlag)),h(await b()),u(await y())},N=async()=>[],b=async()=>[],y=async()=>[],f=async(e,s,a)=>{try{let t=i.find(s=>s.id===e)||o.find(s=>s.id===e);if(!t)return;let l={reason:a||"inappropriate",action:"approve"===s?"none":"hide"===s?"hide":"remove",reviewedBy:"moderator",reviewedAt:new Date};t.moderationFlag=l,t.isModerated="approve"!==s,c(s=>s.filter(s=>s.id!==e)),x(s=>s.filter(s=>s.id!==e)),"warn_user"===s&&await w(t.senderId,-5),console.log("Moderation action: ".concat(s," for message ").concat(e))}catch(e){console.error("Failed to process moderation action:",e)}},w=async(e,s)=>{console.log("Updating trust score for user ".concat(e," by ").concat(s))},D=[{id:"messages",label:"Messages",icon:"\uD83D\uDCAC",count:i.length+o.length},{id:"users",label:"User Reports",icon:"\uD83D\uDC64",count:g.length},{id:"groups",label:"Group Management",icon:"\uD83D\uDC65",count:m.length},{id:"analytics",label:"Analytics",icon:"\uD83D\uDCCA",count:0}];return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"\uD83D\uDEE1️ Chat Moderation Dashboard"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Ensure safe and supportive conversations"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-red-600",children:i.length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Flagged"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:o.length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"In Queue"})]})]})]}),(0,t.jsx)("div",{className:"mt-6 border-b border-gray-200",children:(0,t.jsx)("nav",{className:"-mb-px flex space-x-8",children:D.map(e=>(0,t.jsxs)("button",{onClick:()=>j(e.id),className:"py-2 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ".concat(p===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,t.jsx)("span",{children:e.icon}),e.label,e.count>0&&(0,t.jsx)("span",{className:"bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full",children:e.count})]},e.id))})})]})}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:["messages"===p&&(0,t.jsxs)("div",{className:"space-y-6",children:[i.length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,t.jsxs)("h2",{className:"text-lg font-semibold text-red-600 flex items-center gap-2",children:["\uD83D\uDEA8 Flagged Messages (",i.length,")"]})}),(0,t.jsx)("div",{className:"divide-y divide-gray-200",children:i.map(e=>(0,t.jsx)(r,{message:e,onAction:f,isUrgent:!0},e.id))})]}),o.length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,t.jsxs)("h2",{className:"text-lg font-semibold text-yellow-600 flex items-center gap-2",children:["⏳ Moderation Queue (",o.length,")"]})}),(0,t.jsx)("div",{className:"divide-y divide-gray-200",children:o.map(e=>(0,t.jsx)(r,{message:e,onAction:f,isUrgent:!1},e.id))})]}),0===i.length&&0===o.length&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"✅"}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-green-600 mb-2",children:"All Caught Up!"}),(0,t.jsx)("p",{className:"text-gray-600",children:"No messages requiring moderation at this time."})]})]}),"users"===p&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"User Reports & Management"})}),(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDC64"}),(0,t.jsx)("p",{children:"User reports functionality coming soon..."})]})})]}),"groups"===p&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Group Management"})}),(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDC65"}),(0,t.jsx)("p",{children:"Group management functionality coming soon..."})]})})]}),"analytics"===p&&(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsx)(n,{})})]})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=9104)}),_N_E=e.O()}]);