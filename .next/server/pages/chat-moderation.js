(()=>{var e={};e.id=5492,e.ids=[5492,2888,660],e.modules={1323:(e,s)=>{"use strict";Object.defineProperty(s,"l",{enumerable:!0,get:function(){return function e(s,t){return t in s?s[t]:"then"in s&&"function"==typeof s.then?s.then(s=>e(s,t)):"function"==typeof s&&"default"===t?s:void 0}}})},9485:(e,s,t)=>{"use strict";t.r(s),t.d(s,{config:()=>f,default:()=>v,getServerSideProps:()=>N,getStaticPaths:()=>b,getStaticProps:()=>j,reportWebVitals:()=>y,routeModule:()=>M,unstable_getServerProps:()=>D,unstable_getServerSideProps:()=>A,unstable_getStaticParams:()=>S,unstable_getStaticPaths:()=>P,unstable_getStaticProps:()=>w});var a={};t.r(a),t.d(a,{default:()=>p,getStaticProps:()=>u});var r=t(7093),l=t(5244),d=t(1323),i=t(9694),n=t(5545),c=t(997),o=t(6689),x=t(1377),m=t(5460);let g=({message:e,onAction:s,isUrgent:t})=>{let a;let[r,l]=(0,o.useState)(""),[d,i]=(0,o.useState)("");return c.jsx("div",{className:`p-6 ${t?"bg-red-50":"bg-yellow-50"}`,children:c.jsx("div",{className:"flex items-start justify-between",children:(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("span",{className:`text-sm px-2 py-1 rounded-full ${t?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:t?"FLAGGED":"REVIEW"}),(0,c.jsxs)("span",{className:"text-sm text-gray-500",children:["From: User",e.senderId.slice(-4)]}),c.jsx("span",{className:"text-sm text-gray-500",children:(a=e.timestamp,new Intl.DateTimeFormat("en",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(a))})]}),(0,c.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200 mb-4",children:[c.jsx("div",{className:"font-medium mb-2",children:"Message Content:"}),c.jsx("div",{className:"text-gray-700",children:e.content}),e.moderationFlag&&(0,c.jsxs)("div",{className:"mt-3 text-sm",children:[c.jsx("span",{className:"font-medium text-red-600",children:"Flagged for: "}),c.jsx("span",{className:"capitalize",children:e.moderationFlag.reason})]})]}),(0,c.jsxs)("div",{className:"flex items-center gap-4",children:[(0,c.jsxs)("select",{value:r,onChange:e=>l(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"",children:"Choose action..."}),c.jsx("option",{value:"approve",children:"Approve Message"}),c.jsx("option",{value:"hide",children:"Hide Message"}),c.jsx("option",{value:"remove",children:"Remove Message"}),c.jsx("option",{value:"warn_user",children:"Warn User"})]}),r&&(0,c.jsxs)(c.Fragment,{children:[c.jsx("input",{type:"text",value:d,onChange:e=>i(e.target.value),placeholder:"Reason (optional)",className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),c.jsx("button",{onClick:()=>{r&&(s(e.id,r,d),l(""),i(""))},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Apply"})]})]})]})})})},h=()=>{let e={totalMessages:1247,flaggedMessages:12,approvedMessages:1235,removedMessages:8,warnedUsers:3,suspendedUsers:1,averageResponseTime:"15 minutes",topReasons:[{reason:"Inappropriate language",count:5},{reason:"Spam",count:3},{reason:"Off-topic",count:2},{reason:"Harassment",count:2}]};return(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:(0,c.jsxs)("div",{className:"flex items-center",children:[c.jsx("div",{className:"text-3xl mr-4",children:"\uD83D\uDCAC"}),(0,c.jsxs)("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-gray-800",children:e.totalMessages}),c.jsx("div",{className:"text-gray-600",children:"Total Messages"})]})]})}),c.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:(0,c.jsxs)("div",{className:"flex items-center",children:[c.jsx("div",{className:"text-3xl mr-4",children:"\uD83D\uDEA8"}),(0,c.jsxs)("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-red-600",children:e.flaggedMessages}),c.jsx("div",{className:"text-gray-600",children:"Flagged Messages"})]})]})}),c.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:(0,c.jsxs)("div",{className:"flex items-center",children:[c.jsx("div",{className:"text-3xl mr-4",children:"✅"}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[(e.approvedMessages/e.totalMessages*100).toFixed(1),"%"]}),c.jsx("div",{className:"text-gray-600",children:"Approval Rate"})]})]})}),c.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:(0,c.jsxs)("div",{className:"flex items-center",children:[c.jsx("div",{className:"text-3xl mr-4",children:"⏱️"}),(0,c.jsxs)("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.averageResponseTime}),c.jsx("div",{className:"text-gray-600",children:"Avg Response"})]})]})})]}),(0,c.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Top Flagging Reasons"}),c.jsx("div",{className:"space-y-3",children:e.topReasons.map((s,t)=>(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"font-medium",children:s.reason}),(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-red-600 h-2 rounded-full",style:{width:`${s.count/e.flaggedMessages*100}%`}})}),c.jsx("span",{className:"text-sm text-gray-600 w-8",children:s.count})]})]},t))})]}),(0,c.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Moderation Actions (Last 30 Days)"}),(0,c.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,c.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.approvedMessages}),c.jsx("div",{className:"text-sm text-gray-600",children:"Approved"})]}),(0,c.jsxs)("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-red-600",children:e.removedMessages}),c.jsx("div",{className:"text-sm text-gray-600",children:"Removed"})]}),(0,c.jsxs)("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:e.warnedUsers}),c.jsx("div",{className:"text-sm text-gray-600",children:"Users Warned"})]}),(0,c.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-purple-600",children:e.suspendedUsers}),c.jsx("div",{className:"text-sm text-gray-600",children:"Suspended"})]})]})]})]})},u=async({locale:e})=>({props:{...await (0,m.serverSideTranslations)(e??"en",["common"])}}),p=({chatSystem:e})=>{let{t:s}=(0,x.useTranslation)("common"),[t,a]=(0,o.useState)([]),[r,l]=(0,o.useState)([]),[d,i]=(0,o.useState)([]),[n,m]=(0,o.useState)([]),[u,p]=(0,o.useState)("messages");(0,o.useEffect)(()=>{v()},[]);let v=async()=>{let e=await j();a(e.filter(e=>e.moderationFlag)),l(e.filter(e=>!e.moderationFlag)),i(await b()),m(await N())},j=async()=>[],b=async()=>[],N=async()=>[],f=async(e,s,d)=>{try{let i=t.find(s=>s.id===e)||r.find(s=>s.id===e);if(!i)return;let n={reason:d||"inappropriate",action:"approve"===s?"none":"hide"===s?"hide":"remove",reviewedBy:"moderator",reviewedAt:new Date};i.moderationFlag=n,i.isModerated="approve"!==s,a(s=>s.filter(s=>s.id!==e)),l(s=>s.filter(s=>s.id!==e)),"warn_user"===s&&await y(i.senderId,-5),console.log(`Moderation action: ${s} for message ${e}`)}catch(e){console.error("Failed to process moderation action:",e)}},y=async(e,s)=>{console.log(`Updating trust score for user ${e} by ${s}`)},w=[{id:"messages",label:"Messages",icon:"\uD83D\uDCAC",count:t.length+r.length},{id:"users",label:"User Reports",icon:"\uD83D\uDC64",count:n.length},{id:"groups",label:"Group Management",icon:"\uD83D\uDC65",count:d.length},{id:"analytics",label:"Analytics",icon:"\uD83D\uDCCA",count:0}];return(0,c.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:(0,c.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"\uD83D\uDEE1️ Chat Moderation Dashboard"}),c.jsx("p",{className:"text-gray-600 mt-1",children:"Ensure safe and supportive conversations"})]}),(0,c.jsxs)("div",{className:"flex items-center gap-4",children:[(0,c.jsxs)("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-red-600",children:t.length}),c.jsx("div",{className:"text-sm text-gray-600",children:"Flagged"})]}),(0,c.jsxs)("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:r.length}),c.jsx("div",{className:"text-sm text-gray-600",children:"In Queue"})]})]})]}),c.jsx("div",{className:"mt-6 border-b border-gray-200",children:c.jsx("nav",{className:"-mb-px flex space-x-8",children:w.map(e=>(0,c.jsxs)("button",{onClick:()=>p(e.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${u===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[c.jsx("span",{children:e.icon}),e.label,e.count>0&&c.jsx("span",{className:"bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full",children:e.count})]},e.id))})})]})}),(0,c.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:["messages"===u&&(0,c.jsxs)("div",{className:"space-y-6",children:[t.length>0&&(0,c.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[c.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,c.jsxs)("h2",{className:"text-lg font-semibold text-red-600 flex items-center gap-2",children:["\uD83D\uDEA8 Flagged Messages (",t.length,")"]})}),c.jsx("div",{className:"divide-y divide-gray-200",children:t.map(e=>c.jsx(g,{message:e,onAction:f,isUrgent:!0},e.id))})]}),r.length>0&&(0,c.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[c.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,c.jsxs)("h2",{className:"text-lg font-semibold text-yellow-600 flex items-center gap-2",children:["⏳ Moderation Queue (",r.length,")"]})}),c.jsx("div",{className:"divide-y divide-gray-200",children:r.map(e=>c.jsx(g,{message:e,onAction:f,isUrgent:!1},e.id))})]}),0===t.length&&0===r.length&&(0,c.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[c.jsx("div",{className:"text-6xl mb-4",children:"✅"}),c.jsx("h3",{className:"text-xl font-semibold text-green-600 mb-2",children:"All Caught Up!"}),c.jsx("p",{className:"text-gray-600",children:"No messages requiring moderation at this time."})]})]}),"users"===u&&(0,c.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[c.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:c.jsx("h2",{className:"text-lg font-semibold",children:"User Reports & Management"})}),c.jsx("div",{className:"p-6",children:(0,c.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[c.jsx("div",{className:"text-4xl mb-4",children:"\uD83D\uDC64"}),c.jsx("p",{children:"User reports functionality coming soon..."})]})})]}),"groups"===u&&(0,c.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[c.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:c.jsx("h2",{className:"text-lg font-semibold",children:"Group Management"})}),c.jsx("div",{className:"p-6",children:(0,c.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[c.jsx("div",{className:"text-4xl mb-4",children:"\uD83D\uDC65"}),c.jsx("p",{children:"Group management functionality coming soon..."})]})})]}),"analytics"===u&&c.jsx("div",{className:"space-y-6",children:c.jsx(h,{})})]})]})},v=(0,d.l)(a,"default"),j=(0,d.l)(a,"getStaticProps"),b=(0,d.l)(a,"getStaticPaths"),N=(0,d.l)(a,"getServerSideProps"),f=(0,d.l)(a,"config"),y=(0,d.l)(a,"reportWebVitals"),w=(0,d.l)(a,"unstable_getStaticProps"),P=(0,d.l)(a,"unstable_getStaticPaths"),S=(0,d.l)(a,"unstable_getStaticParams"),D=(0,d.l)(a,"unstable_getServerProps"),A=(0,d.l)(a,"unstable_getServerSideProps"),M=new r.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/chat-moderation",pathname:"/chat-moderation",bundlePath:"",filename:""},components:{App:n.default,Document:i.default},userland:a})},5545:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var a=t(997),r=t(1377);t(108);let l=(0,r.appWithTranslation)(function({Component:e,pageProps:s}){return a.jsx(e,{...s})})},9694:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var a=t(997),r=t(6859);function l(){return(0,a.jsxs)(r.Html,{children:[(0,a.jsxs)(r.Head,{children:[a.jsx("link",{rel:"manifest",href:"/manifest.json"}),a.jsx("meta",{name:"theme-color",content:"#000000"})]}),(0,a.jsxs)("body",{children:[a.jsx(r.Main,{}),a.jsx(r.NextScript,{})]})]})}},108:()=>{},5244:(e,s)=>{"use strict";var t;Object.defineProperty(s,"x",{enumerable:!0,get:function(){return t}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(t||(t={}))},1377:e=>{"use strict";e.exports=require("next-i18next")},5460:e=>{"use strict";e.exports=require("next-i18next/serverSideTranslations")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},5315:e=>{"use strict";e.exports=require("path")}};var s=require("../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[6859],()=>t(9485));module.exports=a})();