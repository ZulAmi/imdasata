"use strict";(()=>{var e={};e.id=1240,e.ids=[1240],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},9706:(e,r,t)=>{t.r(r),t.d(r,{config:()=>c,default:()=>u,routeModule:()=>l});var s={};t.r(s),t.d(s,{default:()=>d});var a=t(1802),n=t(7153),o=t(6249);let i=new(t(7914)).Z;function d(e,r){try{switch(e.method){case"POST":return function(e,r){try{let{resourceId:t,userId:s,rating:a,feedback:n,categories:o,wouldRecommend:d,visitDate:u}=e.body;if(!t||!s||void 0===a)return r.status(400).json({error:"Missing required fields",required:["resourceId","userId","rating"]});if(a<1||a>5)return r.status(400).json({error:"Rating must be between 1 and 5"});Date.now(),Math.random().toString(36).substr(2,9),u||new Date().toISOString().split("T")[0],new Date().toISOString();let c=i.addFeedback({userId:s,resourceId:t,rating:a,feedback:n||"",categories:o||{accessibility:a,effectiveness:a,staff_friendliness:a,language_support:a,wait_time:a},wouldRecommend:void 0!==d?d:a>=4,visitDate:u||new Date().toISOString().split("T")[0],isVerified:!1});return r.status(200).json({success:!0,message:"Feedback submitted successfully",data:{id:c,resourceId:t,rating:a,submittedAt:new Date().toISOString()}})}catch(e){return console.error("Submit feedback error:",e),r.status(500).json({error:"Failed to submit feedback",message:e instanceof Error?e.message:"Unknown error"})}}(e,r);case"GET":return function(e,r){try{let{resourceId:t,limit:s="10",offset:a="0"}=e.query;if(t&&"string"==typeof t)return r.status(200).json({success:!0,message:"Feedback retrieval not yet implemented",data:[],resourceId:t,note:"Feedback is being collected but retrieval requires additional implementation"});return r.status(200).json({success:!0,message:"Feedback endpoint",note:"Specify resourceId to get feedback for a specific resource"})}catch(e){return console.error("Get feedback error:",e),r.status(500).json({error:"Failed to get feedback",message:e instanceof Error?e.message:"Unknown error"})}}(e,r);default:return r.setHeader("Allow",["POST","GET"]),r.status(405).json({error:"Method not allowed"})}}catch(e){return console.error("Feedback API Error:",e),r.status(500).json({error:"Internal server error",message:e instanceof Error?e.message:"Unknown error"})}}let u=(0,o.l)(s,"default"),c=(0,o.l)(s,"config"),l=new a.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/feedback",pathname:"/api/feedback",bundlePath:"",filename:""},userland:s})}};var r=require("../../webpack-api-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[4456],()=>t(9706));module.exports=s})();