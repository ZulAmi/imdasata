"use strict";(()=>{var e={};e.id=5642,e.ids=[5642],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},9989:(e,r,s)=>{s.r(r),s.d(r,{config:()=>d,default:()=>i,routeModule:()=>l});var t={};s.r(t),s.d(t,{default:()=>c});var o=s(1802),a=s(7153),n=s(6249);let u=new(s(7914)).Z;function c(e,r){try{switch(e.method){case"GET":return function(e,r){try{let{categories:s,languages:t,cost:o,searchQuery:a,sortBy:n="rating",sortOrder:c="desc",lat:i,lng:d,maxDistance:l}=e.query,f={searchQuery:a||"",sortBy:n,sortOrder:c};s&&(f.categories=Array.isArray(s)?s:s.split(",")),t&&(f.languages=Array.isArray(t)?t:t.split(",")),o&&(f.cost=Array.isArray(o)?o:o.split(",")),i&&d&&(f.location={coordinates:{lat:parseFloat(i),lng:parseFloat(d)},maxDistance:l?parseFloat(l):void 0});let g=u.searchResources(f,f.location?.coordinates?f.location.coordinates:void 0);return r.status(200).json({success:!0,data:g,count:g.length,filter:f})}catch(e){return console.error("Search error:",e),r.status(500).json({error:"Failed to search resources",message:e instanceof Error?e.message:"Unknown error"})}}(e,r);case"POST":return function(e,r){try{let s=e.body;if(!s.name?.en||!s.category)return r.status(400).json({error:"Missing required fields",required:["name.en","category"]});return u.addResource(s),r.status(201).json({success:!0,message:"Resource created successfully",data:s})}catch(e){return console.error("Create resource error:",e),r.status(500).json({error:"Failed to create resource",message:e instanceof Error?e.message:"Unknown error"})}}(e,r);case"PUT":return function(e,r){try{let{id:s}=e.query,t=e.body;if(!s||"string"!=typeof s)return r.status(400).json({error:"Resource ID is required"});if(!u.updateResource(s,t))return r.status(404).json({error:"Resource not found",id:s});return r.status(200).json({success:!0,message:"Resource updated successfully",id:s})}catch(e){return console.error("Update resource error:",e),r.status(500).json({error:"Failed to update resource",message:e instanceof Error?e.message:"Unknown error"})}}(e,r);case"DELETE":return function(e,r){try{let{id:s}=e.query;if(!s||"string"!=typeof s)return r.status(400).json({error:"Resource ID is required"});if(!u.updateResource(s,{status:"inactive"}))return r.status(404).json({error:"Resource not found",id:s});return r.status(200).json({success:!0,message:"Resource deactivated successfully",id:s})}catch(e){return console.error("Delete resource error:",e),r.status(500).json({error:"Failed to delete resource",message:e instanceof Error?e.message:"Unknown error"})}}(e,r);default:return r.setHeader("Allow",["GET","POST","PUT","DELETE"]),r.status(405).json({error:"Method not allowed"})}}catch(e){return console.error("API Error:",e),r.status(500).json({error:"Internal server error",message:e instanceof Error?e.message:"Unknown error"})}}let i=(0,n.l)(t,"default"),d=(0,n.l)(t,"config"),l=new o.PagesAPIRouteModule({definition:{kind:a.x.PAGES_API,page:"/api/resources",pathname:"/api/resources",bundlePath:"",filename:""},userland:t})}};var r=require("../../webpack-api-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[4456],()=>s(9989));module.exports=t})();