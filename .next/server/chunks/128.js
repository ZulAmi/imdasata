exports.id=128,exports.ids=[128],exports.modules={1323:(e,t)=>{"use strict";Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},1587:(e,t,r)=>{"use strict";r.d(t,{M:()=>n});var i=r(7702);class s extends i.EventEmitter{constructor(){super(),this.users=new Map,this.pairs=new Map,this.interactions=new Map,this.reports=new Map,this.conversationStarters=[],this.matchingQueue=[],this.initializeConversationStarters(),this.startPeriodicTasks()}registerUser(e){let t={language:"en",country:"unknown",interests:[],timezone:"UTC",availableTimes:["evening"],experienceLevel:"newcomer",supportPreferences:{communicationStyle:"flexible",topicsOfInterest:[],triggerWarnings:[]},trustScore:50,totalBuddyPoints:0,buddyHistory:[],joinedAt:new Date,lastActive:new Date,isActive:!0,privacySettings:{shareLocation:!1,sharePersonalInfo:!1,allowVoiceMessages:!0},...e};return this.users.set(t.id,t),this.emit("userRegistered",t),this.addToMatchingQueue(t.id),t}updateUserPreferences(e,t){let r=this.users.get(e);return!!r&&(r.supportPreferences={...r.supportPreferences,...t},this.users.set(e,r),this.emit("userPreferencesUpdated",r),!0)}calculateCompatibilityScore(e,t){let r=0,i={language:.25,timezone:.15,interests:.2,experienceLevel:.15,communicationStyle:.1,availableTimes:.1,ageRange:.05};e.language===t.language&&(r+=100*i.language);let s=Math.max(0,100-10*Math.abs(this.getTimezoneOffset(e.timezone)-this.getTimezoneOffset(t.timezone)));r+=i.timezone*s;let n=Math.min(100,e.interests.filter(e=>t.interests.includes(e)).length/Math.max(e.interests.length,t.interests.length,1)*100);r+=i.interests*n;let a=["newcomer","experienced","veteran"],o=a.indexOf(e.experienceLevel),u=a.indexOf(t.experienceLevel);r+=i.experienceLevel*Math.max(0,100-25*Math.abs(o-u)),(e.supportPreferences.communicationStyle===t.supportPreferences.communicationStyle||"flexible"===e.supportPreferences.communicationStyle||"flexible"===t.supportPreferences.communicationStyle)&&(r+=100*i.communicationStyle);let l=e.availableTimes.filter(e=>t.availableTimes.includes(e)).length/Math.max(e.availableTimes.length,t.availableTimes.length,1)*100;if(r+=i.availableTimes*l,e.supportPreferences.ageRange&&t.supportPreferences.ageRange){let[s,n]=e.supportPreferences.ageRange,[a,o]=t.supportPreferences.ageRange,u=Math.max(n,o)-Math.min(s,a);r+=i.ageRange*(u>0?Math.max(0,Math.min(n,o)-Math.max(s,a))/u*100:100)}return Math.round(r)}getTimezoneOffset(e){return({UTC:0,GMT:0,EST:-5,PST:-8,CST:-6,MST:-7,JST:9,SGT:8,IST:5.5,CET:1,EET:2})[e]||0}findBestMatch(e){let t=this.users.get(e);if(!t||t.currentBuddyId)return null;let r=null,i=0;for(let[s,n]of this.users){if(s===e||n.currentBuddyId||!n.isActive||t.buddyHistory.includes(s)||t.supportPreferences.preferredGender&&"any"!==t.supportPreferences.preferredGender&&n.supportPreferences.preferredGender!==t.supportPreferences.preferredGender)continue;let a=this.calculateCompatibilityScore(t,n);a>i&&a>=60&&(i=a,r=n)}return r}createBuddyPair(e,t){let r=this.users.get(e),i=this.users.get(t);if(!r||!i||r.currentBuddyId||i.currentBuddyId)return null;let s=`pair_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,n=this.calculateCompatibilityScore(r,i),a={id:s,user1Id:e,user2Id:t,pairedAt:new Date,lastInteraction:new Date,interactionCount:0,compatibilityScore:n,status:"active",checkInFrequency:"weekly",sharedGoals:[],conversationStarters:this.getPersonalizedStarters(r,i),points:{user1Points:0,user2Points:0,totalSharedPoints:0}};return r.currentBuddyId=t,i.currentBuddyId=e,r.buddyHistory.push(t),i.buddyHistory.push(e),this.pairs.set(s,a),this.interactions.set(s,[]),this.users.set(e,r),this.users.set(t,i),this.emit("buddyPairCreated",a),a}addToMatchingQueue(e){this.matchingQueue.includes(e)||(this.matchingQueue.push(e),this.processMatchingQueue())}processMatchingQueue(){if(this.matchingQueue.length<2)return;let e=new Set;for(let t of[...this.matchingQueue]){if(e.has(t))continue;let r=this.users.get(t);if(!r||r.currentBuddyId||!r.isActive){this.matchingQueue=this.matchingQueue.filter(e=>e!==t);continue}let i=this.findBestMatch(t);i&&!e.has(i.id)&&this.createBuddyPair(t,i.id)&&(e.add(t),e.add(i.id),this.matchingQueue=this.matchingQueue.filter(e=>e!==t&&e!==i.id))}}recordInteraction(e,t){let r={id:`int_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,...t},i=this.interactions.get(e)||[];i.push(r),this.interactions.set(e,i);let s=this.pairs.get(e);if(s){s.lastInteraction=new Date,s.interactionCount++;let i=this.calculateInteractionPoints(r);t.initiatorId===s.user1Id?s.points.user1Points+=i:s.points.user2Points+=i,s.points.totalSharedPoints+=i;let n=this.users.get(t.initiatorId);n&&(n.totalBuddyPoints+=i,this.users.set(t.initiatorId,n)),this.pairs.set(e,s)}return this.emit("interactionRecorded",r),r}calculateInteractionPoints(e){let t;return t=10+(e.quality-1)*5+(({"check-in":5,"voice-call":15,"text-chat":8,"goal-update":12,emergency:20})[e.type]||0),e.duration&&(t+=Math.min(20,Math.floor(e.duration/5))),e.mood.after>e.mood.before&&(t+=(e.mood.after-e.mood.before)*2),t}initializeConversationStarters(){this.conversationStarters=[{id:"check-in-1",category:"check-in",text:"How has your week been treating you? Any highlights or challenges?",followUpQuestions:["What made that moment special/difficult for you?","How did you handle that situation?","What would you do differently next time?"],culturallySensitive:!0,experienceLevel:"all"},{id:"goal-1",category:"goal-setting",text:"What's one small thing you'd like to accomplish this week?",followUpQuestions:["What steps could help you get there?","What might get in the way?","How can I support you with this goal?"],culturallySensitive:!0,experienceLevel:"all"},{id:"coping-1",category:"coping-strategies",text:"What's something that always helps you feel a bit better when you're down?",followUpQuestions:["When did you first discover this helps?","Have you tried sharing this with others?","Are there variations of this that work too?"],culturallySensitive:!0,experienceLevel:"experienced"},{id:"cultural-1",category:"cultural-exchange",text:"What's a tradition or custom from your background that brings you comfort?",followUpQuestions:["How do you maintain this tradition here?","Have you adapted it to your new environment?","Would you like to share this with others?"],culturallySensitive:!0,experienceLevel:"all"},{id:"light-1",category:"light-hearted",text:"If you could have any superpower for just one day, what would you choose?",followUpQuestions:["What would you do first with that power?","How would you use it to help others?","What would be the funniest way to use it?"],culturallySensitive:!0,experienceLevel:"all"},{id:"newcomer-1",category:"check-in",text:"What's been the most surprising thing about settling in here?",followUpQuestions:["How different was it from what you expected?","What has helped you adjust?","What do you miss most from home?"],culturallySensitive:!0,experienceLevel:"newcomer"}]}getPersonalizedStarters(e,t){return this.conversationStarters.filter(r=>"all"===r.experienceLevel||r.experienceLevel===e.experienceLevel||r.experienceLevel===t.experienceLevel).slice(0,5).map(e=>e.text)}getConversationStarter(e,t){let r=this.pairs.get(e);if(!r)return null;let i=this.users.get(r.user1Id),s=this.users.get(r.user2Id);if(!i||!s)return null;let n=this.conversationStarters.filter(e=>(!t||e.category===t)&&("all"===e.experienceLevel||e.experienceLevel===i.experienceLevel||e.experienceLevel===s.experienceLevel));0===n.length&&(n=this.conversationStarters.filter(e=>"all"===e.experienceLevel));let a=Math.floor(Math.random()*n.length);return n[a]||null}scheduleNextCheckIn(e){let t=this.pairs.get(e);if(!t)return;let r=new Date,i=new Date(r);switch(t.checkInFrequency){case"daily":i.setDate(r.getDate()+1);break;case"weekly":i.setDate(r.getDate()+7);break;case"biweekly":i.setDate(r.getDate()+14)}t.nextScheduledCheckIn=i,this.pairs.set(e,t),this.emit("checkInScheduled",{pairId:e,nextCheckIn:i})}getDueCheckIns(){let e=new Date;return Array.from(this.pairs.values()).filter(t=>"active"===t.status&&t.nextScheduledCheckIn&&t.nextScheduledCheckIn<=e)}reportUser(e){let t=`report_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,r={id:t,timestamp:new Date,status:"pending",...e};return this.reports.set(t,r),this.emit("safetyReportFiled",r),"critical"===r.severity&&this.handleCriticalReport(r),r}handleCriticalReport(e){let t=this.users.get(e.reportedUserId);if(t&&(t.isActive=!1,this.users.set(e.reportedUserId,t),t.currentBuddyId)){let r=this.findPairByUsers(e.reportedUserId,t.currentBuddyId);r&&this.endBuddyPair(r,"report")}this.emit("criticalReportHandled",e)}endBuddyPair(e,t){let r=this.pairs.get(e);if(!r)return!1;r.status="ended",r.endReason=t;let i=this.users.get(r.user1Id),s=this.users.get(r.user2Id);return i&&(i.currentBuddyId=void 0,this.users.set(r.user1Id,i),"report"!==t&&i.isActive&&this.addToMatchingQueue(r.user1Id)),s&&(s.currentBuddyId=void 0,this.users.set(r.user2Id,s),"report"!==t&&s.isActive&&this.addToMatchingQueue(r.user2Id)),this.pairs.set(e,r),this.emit("buddyPairEnded",{pairId:e,reason:t}),!0}requestNewBuddy(e,t){let r=this.users.get(e);if(!r||!r.currentBuddyId)return!1;let i=this.findPairByUsers(e,r.currentBuddyId);return!!i&&(this.endBuddyPair(i,"reassignment"),this.emit("newBuddyRequested",{userId:e,reason:t}),!0)}findPairByUsers(e,t){for(let[r,i]of this.pairs)if(i.user1Id===e&&i.user2Id===t||i.user1Id===t&&i.user2Id===e)return r;return null}getUserStats(e){let t=this.users.get(e);if(!t)return null;let r=Array.from(this.interactions.values()).flat().filter(t=>t.initiatorId===e),i=t.currentBuddyId?Array.from(this.pairs.values()).find(t=>t.user1Id===e||t.user2Id===e):null;return{totalPoints:t.totalBuddyPoints,trustScore:t.trustScore,totalInteractions:r.length,averageInteractionQuality:r.length>0?r.reduce((e,t)=>e+t.quality,0)/r.length:0,buddyHistory:t.buddyHistory.length,currentBuddyPairedAt:i?.pairedAt,daysWithCurrentBuddy:i?Math.floor((Date.now()-i.pairedAt.getTime())/864e5):0}}getPairStats(e){let t=this.pairs.get(e),r=this.interactions.get(e)||[];if(!t)return null;let i=this.users.get(t.user1Id),s=this.users.get(t.user2Id);return{compatibilityScore:t.compatibilityScore,daysTogether:Math.floor((Date.now()-t.pairedAt.getTime())/864e5),totalInteractions:r.length,averageQuality:r.length>0?r.reduce((e,t)=>e+t.quality,0)/r.length:0,totalSharedPoints:t.points.totalSharedPoints,lastInteractionDaysAgo:t.lastInteraction?Math.floor((Date.now()-t.lastInteraction.getTime())/864e5):null,checkInFrequency:t.checkInFrequency,nextCheckIn:t.nextScheduledCheckIn,user1:i?{name:i.name,points:t.points.user1Points}:null,user2:s?{name:s.name,points:t.points.user2Points}:null}}startPeriodicTasks(){setInterval(()=>{this.checkInactivePairs()},36e5),setInterval(()=>{this.processMatchingQueue()},3e5),setInterval(()=>{this.sendCheckInReminders()},864e5)}checkInactivePairs(){let e=new Date;for(let[t,r]of this.pairs)"active"===r.status&&e.getTime()-r.lastInteraction.getTime()>6048e5&&this.endBuddyPair(t,"timeout")}sendCheckInReminders(){for(let e of this.getDueCheckIns())this.emit("checkInReminder",e)}getUser(e){return this.users.get(e)}getPair(e){return this.pairs.get(e)}getUserPair(e){return Array.from(this.pairs.values()).find(t=>t.user1Id===e||t.user2Id===e)}getPairInteractions(e){return this.interactions.get(e)||[]}getActiveUsers(){return Array.from(this.users.values()).filter(e=>e.isActive)}getActivePairs(){return Array.from(this.pairs.values()).filter(e=>"active"===e.status)}getPendingReports(){return Array.from(this.reports.values()).filter(e=>"pending"===e.status)}}let n=new s},5545:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var i=r(997),s=r(1377);r(108);let n=(0,s.appWithTranslation)(function({Component:e,pageProps:t}){return i.jsx(e,{...t})})},9694:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var i=r(997),s=r(6859);function n(){return(0,i.jsxs)(s.Html,{children:[(0,i.jsxs)(s.Head,{children:[i.jsx("link",{rel:"manifest",href:"/manifest.json"}),i.jsx("meta",{name:"theme-color",content:"#000000"})]}),(0,i.jsxs)("body",{children:[i.jsx(s.Main,{}),i.jsx(s.NextScript,{})]})]})}},108:()=>{},5244:(e,t)=>{"use strict";var r;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(r||(r={}))}};