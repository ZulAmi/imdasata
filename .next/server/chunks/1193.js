"use strict";exports.id=1193,exports.ids=[1193],exports.modules={1193:(e,s,l)=>{l.d(s,{Z:()=>i});var t=l(997),a=l(6689),r=l(3923);let i=({userId:e,initialUser:s})=>{let[l,i]=(0,a.useState)(s||null),[d,n]=(0,a.useState)("dashboard"),[c,o]=(0,a.useState)([]),[x,m]=(0,a.useState)([]),[h,b]=(0,a.useState)([]),[g,u]=(0,a.useState)([]),[v,j]=(0,a.useState)(null),[p,N]=(0,a.useState)(null),[y,f]=(0,a.useState)(null),[w,D]=(0,a.useState)(!1),[C,k]=(0,a.useState)({show:!1,level:0}),[S,L]=(0,a.useState)({show:!1}),A=(0,a.useRef)();(0,a.useEffect)(()=>(P(),R(),()=>{r.b.removeAllListeners(),A.current&&clearTimeout(A.current)}),[e]);let P=()=>{let s=r.b.getUser(e);s||(s=r.b.createUser({userId:e,username:`User_${e.slice(-6)}`,email:void 0})),i(s),o(r.b.getTransactions(e)?.slice(0,20)||[]),m(s.achievements),b(r.b.getAvailableRewards(e)),u(r.b.getLeaderboard("all-time",10)),j(r.b.getUserStats(e))},R=()=>{r.b.on("pointsAwarded",s=>{s.userId===e&&(P(),I(s.amount))}),r.b.on("levelUp",s=>{s.user.userId===e&&(k({show:!0,level:s.newLevel,levelInfo:s.levelInfo}),setTimeout(()=>{k({show:!1,level:0})},4e3),P())}),r.b.on("achievementUnlocked",s=>{s.user.userId===e&&(L({show:!0,achievement:s.achievement}),setTimeout(()=>{L({show:!1})},5e3),P())}),r.b.on("rewardRedeemed",s=>{s.user.userId===e&&(f(s.redemption),D(!0),P())})},I=e=>{console.log(`+${e} points earned!`)},E=async s=>{if(!l||l.availablePoints<s.pointCost){alert("Insufficient points!");return}try{let l=await r.b.redeemReward(e,s.id);l&&(f(l),D(!0),N(null),P())}catch(e){alert("Failed to redeem reward. Please try again.")}};return l?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:t.jsx("div",{className:"max-w-6xl mx-auto px-4 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"\uD83C\uDFAE Gamification"}),t.jsx("p",{className:"text-gray-600",children:"Track your progress and earn rewards"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"font-semibold text-lg",children:[l.availablePoints.toLocaleString()," \uD83D\uDC8E"]}),t.jsx("div",{className:"text-sm text-gray-600",children:"Available Points"})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"font-semibold text-lg",children:["Level ",l.currentLevel," ",v?.level?.badge]}),t.jsx("div",{className:"text-sm text-gray-600",children:v?.level?.name})]})]})]})})}),t.jsx("div",{className:"bg-white border-b border-gray-200",children:t.jsx("div",{className:"max-w-6xl mx-auto px-4",children:t.jsx("nav",{className:"flex space-x-8",children:[{id:"dashboard",label:"Dashboard",icon:"\uD83C\uDFE0"},{id:"achievements",label:"Achievements",icon:"\uD83C\uDFC6"},{id:"rewards",label:"Rewards",icon:"\uD83C\uDF81"},{id:"leaderboard",label:"Leaderboard",icon:"\uD83C\uDFC5"},{id:"stats",label:"Statistics",icon:"\uD83D\uDCCA"}].map(e=>(0,t.jsxs)("button",{onClick:()=>n(e.id),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${d===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx("span",{className:"mr-2",children:e.icon}),e.label]},e.id))})})}),(0,t.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-6",children:["dashboard"===d&&(()=>{if(!l||!v)return null;let s=v.level,a=v.nextLevel,i=a?(l.totalPoints-s.pointsRequired)/(a.pointsRequired-s.pointsRequired)*100:100;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl p-6 text-white",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"text-2xl font-bold",children:s?.name||"Newcomer"}),(0,t.jsxs)("p",{className:"text-blue-100",children:["Level ",l.currentLevel]})]}),t.jsx("div",{className:"text-4xl",children:s?.badge||"\uD83C\uDF31"})]}),a&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsxs)("span",{children:["Progress to ",a.name]}),(0,t.jsxs)("span",{children:[v.pointsToNextLevel," points to go"]})]}),t.jsx("div",{className:"w-full bg-blue-400 rounded-full h-3",children:t.jsx("div",{className:"bg-white rounded-full h-3 transition-all duration-500",style:{width:`${Math.max(i,5)}%`}})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsx("div",{className:"bg-white rounded-lg p-4 shadow-md border border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-gray-600 text-sm",children:"Available Points"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:l.availablePoints.toLocaleString()})]}),t.jsx("div",{className:"text-green-500 text-2xl",children:"\uD83D\uDC8E"})]})}),t.jsx("div",{className:"bg-white rounded-lg p-4 shadow-md border border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-gray-600 text-sm",children:"Total Earned"}),t.jsx("p",{className:"text-2xl font-bold text-blue-600",children:l.lifetimePoints.toLocaleString()})]}),t.jsx("div",{className:"text-blue-500 text-2xl",children:"⭐"})]})}),t.jsx("div",{className:"bg-white rounded-lg p-4 shadow-md border border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-gray-600 text-sm",children:"Current Streak"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-orange-600",children:[l.currentStreak," days"]})]}),t.jsx("div",{className:"text-orange-500 text-2xl",children:"\uD83D\uDD25"})]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-md border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recent Activity"}),t.jsx("div",{className:"space-y-3",children:c.slice(0,5).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:`w-2 h-2 rounded-full ${"earn"===e.type?"bg-green-500":"bg-red-500"}`}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium",children:e.description}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[e.timestamp.toLocaleDateString()," at ",e.timestamp.toLocaleTimeString()]})]})]}),(0,t.jsxs)("div",{className:`font-semibold ${"earn"===e.type?"text-green-600":"text-red-600"}`,children:["earn"===e.type?"+":"-",Math.abs(e.amount)]})]},e.id))})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-md border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Actions"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("button",{onClick:()=>{r.b.recordDailyCheckIn(e,8,"Feeling good today!")},className:"p-4 bg-green-50 rounded-lg border border-green-200 hover:bg-green-100 transition-colors",children:[t.jsx("div",{className:"text-2xl mb-2",children:"✅"}),t.jsx("div",{className:"text-sm font-medium",children:"Daily Check-in"})]}),(0,t.jsxs)("button",{onClick:()=>{r.b.recordAssessment(e,"PHQ-4",8)},className:"p-4 bg-blue-50 rounded-lg border border-blue-200 hover:bg-blue-100 transition-colors",children:[t.jsx("div",{className:"text-2xl mb-2",children:"\uD83D\uDCCA"}),t.jsx("div",{className:"text-sm font-medium",children:"Take Assessment"})]}),(0,t.jsxs)("button",{onClick:()=>{r.b.recordEducationalEngagement(e,"article",300)},className:"p-4 bg-purple-50 rounded-lg border border-purple-200 hover:bg-purple-100 transition-colors",children:[t.jsx("div",{className:"text-2xl mb-2",children:"\uD83D\uDCDA"}),t.jsx("div",{className:"text-sm font-medium",children:"Learn Something"})]}),(0,t.jsxs)("button",{onClick:()=>{r.b.recordPeerSupportActivity(e,"support-given",5)},className:"p-4 bg-orange-50 rounded-lg border border-orange-200 hover:bg-orange-100 transition-colors",children:[t.jsx("div",{className:"text-2xl mb-2",children:"\uD83E\uDD1D"}),t.jsx("div",{className:"text-sm font-medium",children:"Help Others"})]})]})]})]})})(),"achievements"===d&&t.jsx("div",{className:"space-y-6",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-md border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Your Achievements"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[x.map(e=>(0,t.jsxs)("div",{className:`p-4 rounded-lg border-2 ${"legendary"===e.rarity?"border-yellow-300 bg-yellow-50":"epic"===e.rarity?"border-purple-300 bg-purple-50":"rare"===e.rarity?"border-blue-300 bg-blue-50":"border-gray-300 bg-gray-50"}`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("div",{className:"text-2xl",children:e.icon}),t.jsx("div",{className:`text-xs px-2 py-1 rounded ${"legendary"===e.rarity?"bg-yellow-200 text-yellow-800":"epic"===e.rarity?"bg-purple-200 text-purple-800":"rare"===e.rarity?"bg-blue-200 text-blue-800":"bg-gray-200 text-gray-800"}`,children:e.rarity.toUpperCase()})]}),t.jsx("h4",{className:"font-semibold",children:e.name}),t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("span",{className:"text-sm font-medium text-green-600",children:["+",e.points," points"]}),t.jsx("span",{className:"text-xs text-gray-500",children:e.unlockedAt.toLocaleDateString()})]})]},e.id)),0===x.length&&(0,t.jsxs)("div",{className:"col-span-full text-center py-8 text-gray-500",children:[t.jsx("div",{className:"text-4xl mb-2",children:"\uD83C\uDFC6"}),t.jsx("p",{children:"No achievements yet. Start engaging to unlock them!"})]})]})]})}),"rewards"===d&&t.jsx("div",{className:"space-y-6",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-md border border-gray-200",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Available Rewards"}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["You have ",l?.availablePoints.toLocaleString()," points to spend"]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(e=>(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("div",{className:"text-3xl",children:e.icon}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"font-semibold text-blue-600",children:[e.pointCost," points"]}),"limited"===e.availability&&void 0!==e.stock&&(0,t.jsxs)("div",{className:"text-xs text-orange-600",children:[e.stock," left"]})]})]}),t.jsx("h4",{className:"font-semibold mb-2",children:e.name}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:e.description}),e.requirements&&t.jsx("div",{className:"mb-3 text-xs text-gray-500",children:e.requirements.minLevel&&(0,t.jsxs)("div",{children:["Requires Level ",e.requirements.minLevel,"+"]})}),t.jsx("button",{onClick:()=>E(e),disabled:!l||l.availablePoints<e.pointCost,className:`w-full py-2 px-4 rounded-md font-medium transition-colors ${l&&l.availablePoints>=e.pointCost?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:l&&l.availablePoints>=e.pointCost?"Redeem":"Insufficient Points"})]},e.id))}),0===h.length&&(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[t.jsx("div",{className:"text-4xl mb-2",children:"\uD83C\uDF81"}),t.jsx("p",{children:"No rewards available at your current level."})]})]})}),"leaderboard"===d&&(()=>{let s=g.findIndex(s=>s.userId===e)+1;return t.jsx("div",{className:"space-y-6",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-md border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Leaderboard"}),s>0&&s<=10&&t.jsx("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:(0,t.jsxs)("p",{className:"text-sm text-blue-800",children:["\uD83C\uDF89 You're ranked #",s," on the leaderboard!"]})}),t.jsx("div",{className:"space-y-3",children:g.map((s,l)=>(0,t.jsxs)("div",{className:`flex items-center justify-between p-4 rounded-lg border ${s.userId===e?"border-blue-300 bg-blue-50":"border-gray-200 bg-gray-50"}`,children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-white ${1===s.rank?"bg-yellow-500":2===s.rank?"bg-gray-400":3===s.rank?"bg-amber-600":"bg-gray-500"}`,children:1===s.rank?"\uD83E\uDD47":2===s.rank?"\uD83E\uDD48":3===s.rank?"\uD83E\uDD49":s.rank}),(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-semibold",children:s.username}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Level ",s.level," ",s.badge]})]})]}),t.jsx("div",{className:"text-right",children:(0,t.jsxs)("div",{className:"font-semibold text-blue-600",children:[s.points.toLocaleString()," points"]})})]},s.userId))}),s>10&&t.jsx("div",{className:"mt-6 p-4 bg-gray-100 rounded-lg",children:(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["You're currently ranked #",s,". Keep engaging to climb higher!"]})})]})})})(),"stats"===d&&(v?t.jsx("div",{className:"space-y-6",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-md border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Your Statistics"}),(0,t.jsxs)("div",{className:"mb-6",children:[t.jsx("h4",{className:"font-medium mb-3",children:"Points by Category"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(v.categoryBreakdown).map(([e,s])=>(0,t.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"capitalize",children:e.replace("-"," ")}),(0,t.jsxs)("span",{className:"font-semibold text-blue-600",children:[s," points"]})]},e))})]}),(0,t.jsxs)("div",{className:"mb-6",children:[t.jsx("h4",{className:"font-medium mb-3",children:"Streaks"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.longestStreaks.map(e=>(0,t.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"capitalize",children:e.type.replace("-"," ")}),(0,t.jsxs)("span",{className:"font-semibold text-orange-600",children:[e.length," days"]})]},e.type))})]}),(0,t.jsxs)("div",{children:[t.jsx("h4",{className:"font-medium mb-3",children:"Overall Progress"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:v.totalTransactions}),t.jsx("div",{className:"text-sm text-gray-600",children:"Total Activities"})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[t.jsx("div",{className:"text-2xl font-bold text-purple-600",children:v.achievements}),t.jsx("div",{className:"text-sm text-gray-600",children:"Achievements"})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:v.currentStreaks.length}),t.jsx("div",{className:"text-sm text-gray-600",children:"Active Streaks"})]})]})]})]})}):null)]}),C.show&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl p-8 text-center max-w-md mx-4 animate-bounce",children:[t.jsx("div",{className:"text-6xl mb-4",children:C.levelInfo?.badge||"\uD83C\uDF89"}),t.jsx("h2",{className:"text-2xl font-bold text-blue-600 mb-2",children:"Level Up!"}),(0,t.jsxs)("p",{className:"text-lg mb-4",children:["You've reached Level ",C.level,"!"]}),t.jsx("p",{className:"text-gray-600",children:C.levelInfo?.name||"New Level Achieved"}),t.jsx("div",{className:"mt-4 text-green-600 font-semibold",children:"+25 Bonus Points! \uD83C\uDF81"})]})}),S.show&&S.achievement&&t.jsx("div",{className:"fixed top-4 right-4 bg-white rounded-lg shadow-lg border border-gray-200 p-4 max-w-sm z-40 animate-slide-in-right",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"text-2xl",children:S.achievement.icon}),(0,t.jsxs)("div",{children:[t.jsx("h4",{className:"font-semibold",children:"Achievement Unlocked!"}),t.jsx("p",{className:"text-sm text-gray-600",children:S.achievement.name}),(0,t.jsxs)("p",{className:"text-xs text-green-600",children:["+",S.achievement.points," points"]})]})]})}),w&&y&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl p-8 text-center max-w-md mx-4",children:[t.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Reward Redeemed!"}),t.jsx("div",{className:"mb-4",children:t.jsx("img",{src:y.qrCode,alt:"QR Code",className:"mx-auto w-48 h-48 border border-gray-300 rounded-lg"})}),(0,t.jsxs)("p",{className:"text-gray-600 mb-4",children:["Show this QR code to redeem your reward.",t.jsx("br",{}),"Valid until: ",y.expiresAt.toLocaleDateString()]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("button",{onClick:()=>{let e=document.createElement("a");e.download=`reward_${y.id}.png`,e.href=y.qrCode,e.click()},className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Download QR Code"}),t.jsx("button",{onClick:()=>D(!1),className:"w-full bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 transition-colors",children:"Close"})]})]})})]}):t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"text-4xl mb-4",children:"\uD83C\uDFAE"}),t.jsx("p",{className:"text-gray-600",children:"Loading your gamification profile..."})]})})}}};